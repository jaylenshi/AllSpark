# 泛智能数据闭环供应链 - 领域驱动需求分析

> **文档版本**：v2.0 | **创建日期**：2025年2月 | **方法论**：领域驱动设计（DDD）  
> **关联文档**：[01.市场调研](01.市场调研.md)、[03.产品框架](03.产品框架.md)  
> **适用对象**：产品规划、架构设计、研发、需求评审团队

---

## 文档说明

本文档采用**领域驱动设计（Domain-Driven Design, DDD）**方法论，将《01.市场调研》的市场洞察转化为结构化的领域模型与需求。**分析顺序**：先完成用户识别（第一章）与用户故事（第二章），再开展 DDD 战略设计与战术设计。DDD 强调**统一语言**、**限界上下文**、**聚合**等概念，使需求与业务语义一致，便于架构设计与迭代。

| 文档 | 定位 | 关系 |
|------|------|------|
| **01.市场调研** | 市场与行业调研；规模、痛点、竞品、机会 | 为本领域分析提供输入 |
| **02.需求分析**（本文档）| DDD 领域建模；子域、限界上下文、聚合、领域事件、需求详表 | 承接市场调研，为产品框架提供依据 |
| **03.产品框架** | 产品框架设计；公共能力、产品模块、路线图 | 依赖本领域模型进行能力与模块设计 |
| **04.全局优化建议分析** | 三文档交叉分析；优化建议清单 | 迭代与决策参考 |

**引用约定**（F3）：引用市场数据时沿用 [01.市场调研](01.市场调研.md) [1]-[25] 编号，详见该文档 10.2。

**DDD 在本文档的应用**：
- **战略设计**：子域划分、限界上下文、统一语言、上下文映射
- **战术设计**：聚合、实体、值对象、领域事件、领域服务
- **事件风暴**：命令、事件、策略、参与者、外部系统
- **需求详表**：每个上下文的详细功能需求、验收标准、子需求分解

---

## 变更日志

| 时间 | 变更人 | 变更内容 |
|------|--------|----------|
| 2025-02-13 | — | 全局优化建议实施：CAT-06 场景挖掘；2.7.1 用户旅程图；2.11 行业×优先级交叉表；GOV-01 可测场景；3.2 商业域边界；11.3.1 FD-AD.5 验收/标杆区分；11.3.3 家居覆盖说明；附录 B 需求变更 Checklist；NF-03 压缩比；文档体系 04、F2、F3 |
| 2025-02-13 | jaylen | 领域建模完备性检查：限界上下文完备性矩阵、聚合/事件检查、01 调研闭环对齐；实施 ORC-06 成本看板、BHV-01.1 工业信号 AC |
| 2025-02-13 | jaylen | 新增完善度评估：13 维度按「用户洞察→DDD 建模→需求交付→文档规范」四层；综合 96/100；目录增加完善度评估链接 |
| 2025-02-13 | jaylen | 基于用户洞察重做领域建模：子域/BC 与用户故事对齐；统一语言补场景挖掘、场景包、部署形态；BC-GOV 增部署拓扑、GOV-06；BC-CAT 增场景挖掘；领域服务补场景挖掘、成本核算与用户故事溯源；事件风暴扩展参与者与命令 |
| 2025-02-13 | jaylen | 章节重组：用户识别与用户故事前置为第一、第二章；DDD 战略/战术设计顺延为第三～十一章；分析顺序：先用户识别与用户旅程，再 DDD |
| 2025-02-13 | jaylen | 用户故事大表完善：新增 11.0 表结构说明；全表补充组织类型、优先级、关联需求列；11.8 场景细化与验收要点；11.9 需求/用例映射；11.10 按 BC 索引；11.11 优先级矩阵 |
| 2025-02-13 | jaylen | 新增十一、用户故事大表：57 条用户故事；智驾 28、家居 5、具身 7、工业 9、政府 2、供应商 6；含完整用户故事语句与 BC 映射 |
| 2025-02-13 | jaylen | 新增十、用户识别（完整）：按行业×组织×层级穷举 35+ 角色；智驾 17、家居 4、具身 5、工业 7、政府 2、供应商 6；角色与 BC 映射；用户识别检查清单 |
| 2025-02-13 | jaylen | DDD 方法论文档重构：战略设计（子域、限界上下文、统一语言）；战术设计（聚合、实体、领域事件）；事件风暴；上下文映射；各限界上下文详细需求建模 |
| 2025-02-13 | jaylen | 功能需求细化：3.1.1 按闭环环节分类；3.1.2 子需求分解与验收标准；3.1.3 典型用例；3.2 分行业差异化 |
| 2025-02-13 | jaylen | 初稿：建立 01 市场调研与 03 产品框架之间的需求分析阶段 |

---

## 完善度评估

### 评估维度设计思路

需求分析文档服务于产品规划与研发实现，评估体系按 **「用户洞察 → DDD 建模 → 需求交付 → 文档规范」** 四层构建：

| 层级 | 目标 | 对应维度 |
|------|------|----------|
| **用户洞察** | 用户识别完整、用户故事可追溯 | 用户识别完整性、用户故事完整性、行业覆盖度 |
| **DDD 建模** | 战略与战术设计完整、事件风暴可落地 | 战略设计、战术设计、事件风暴、上下文映射 |
| **需求交付** | 需求可验收、可追溯至上下游 | 需求详表、需求追溯、与调研衔接、与产品框架衔接 |
| **文档规范** | 结构清晰、边界明确、易读 | 结构完整性、呈现方式 |

---

### 评估维度表

> **评估日期**：2025-02-13 | **综合得分**：96/100 | **等级**：优秀

| 维度 | 得分 | 满分 | 说明 |
|------|------|------|------|
| **结构完整性** | 99 | 100 | 一～十一章齐全；目录、变更日志、文档说明、附录 A～D 完整；分析顺序（用户→DDD）明确 |
| **用户识别完整性** | 97 | 100 | 1.1 维度说明；1.2 六行业×组织×层级角色总览；1.3 汇总表；1.4 角色-BC 映射；1.5 检查清单；与 [01.市场调研](01.市场调研.md) 6.4 客户画像对应 |
| **用户故事完整性** | 96 | 100 | 61 条用户故事（39 P0）；2.0 表结构说明；2.8 场景细化与验收要点；2.9 需求/用例映射；2.10 按 BC 索引；2.11 优先级矩阵 |
| **行业覆盖度** | 97 | 100 | 智驾 32、家居 5、具身 7、工业/物联网 9、政府 2、供应商 6；11.3 分行业差异化（FD-AD/IN/HA/EM/IoT）|
| **战略设计** | 98 | 100 | 4.1 子域划分含用户故事溯源；4.2 8 个限界上下文含职责与关联故事；4.3 统一语言含行业扩展术语（场景挖掘、部署形态、Matter、XIL）|
| **战术设计** | 96 | 100 | 6.1 聚合汇总；6.2 实体与值对象；6.3 领域服务（含场景挖掘、成本核算）与用户故事溯源；BC-GOV 部署拓扑 |
| **事件风暴** | 95 | 100 | 7.1 命令（含 RequestCostDashboard、RequestSceneMining）；7.2 事件流；7.3 策略；7.4 参与者与第一章角色对齐；7.5 外部系统含行业扩展 |
| **上下文映射** | 96 | 100 | 八章 Context Map 图；上下游关系表；OHS 集成方式 |
| **需求详表** | 96 | 100 | 5.1～5.8 各 BC 职责、聚合、事件、功能需求（ING/CAT/ORC/ANN/SIM/BHV/OTA/GOV）；子需求分解（附录 D）；GOV-06 部署形态 |
| **需求追溯** | 98 | 100 | 2.9 需求 ID↔用户故事；11.1 痛点→BC→产品框架；11.2 上下文需求汇总；各 BC 关联用户故事列 |
| **与调研衔接** | 97 | 100 | 文档说明引用 01.市场调研；11.1 痛点溯源 01 调研 6.1；11.3 分行业扩展含数据来源列 |
| **与产品框架衔接** | 97 | 100 | 附录 B 与 [03.产品框架](03.产品框架.md) 对应；能力量化目标、行业优先级、用例驱动映射 |
| **呈现方式** | 96 | 100 | 多表（用户故事、BC 详表、事件风暴、追溯矩阵）；层级清晰；可补充用户旅程图 |

**综合计算**：各维度等权平均，(99+97+96+97+98+96+95+96+96+98+97+97+96)/13 ≈ **96.5/100**，取整 **96/100**。

**等级说明**：≥90 优秀；80-89 良好；70-79 合格；<70 待改进。

**待改进项**（可选）：① 可增加用户旅程（User Journey）图；② 部分 P1 需求可补充验收场景；③ 用户故事 2b（定价）属商业域，可单独说明边界。

**下次评估触发**（F2）：文档内容更新后需完成——① 刷新本表与评估日期；② 更新目录；③ 若涉及建议项，同步 [04.全局优化建议分析](04.全局优化建议分析.md)。

---

### 领域建模完备性检查

> **检查日期**：2025-02-13 | **检查依据**：用户故事覆盖、01.市场调研闭环环节、DDD 建模完整性

#### 一、限界上下文完备性矩阵

| 检查项 | 状态 | 说明 |
|--------|:----:|------|
| **闭环环节覆盖** | ✅ | 采集(ING)→传输/编排(ORC)→目录(CAT)→标注(ANN)→仿真(SIM)→行为分析(BHV)→回灌(ORC)→OTA(OTA)；训练平台为外部系统，边界明确 |
| **行业覆盖** | ✅ | 智驾、家居、具身、工业、政府 6 行业均有 BC 映射；FD-AD/IN/HA/EM/IoT 分行业扩展 |
| **用户故事无遗漏** | ✅ | 61 条用户故事全部映射至 BC 或「跨 BC/全链路」；2、2a、2b（PoC/案例/定价）属商业域，已排除 |
| **BC 数量与职责清晰** | ✅ | 8 个 BC 边界明确；子域类型（核心 2/支撑 3/通用 3）与业务重要性一致 |
| **上下文映射完整** | ✅ | BC-ING→CAT、ING→ORC、ORC→ANN/SIM/OTA、ANN→CAT、BHV→ANN/ORC、SIM→CAT、全链路→GOV；无孤立 BC |

#### 二、聚合与 tactical 设计完备性

| BC | 聚合根 | 检查项 | 状态 | 说明 |
|----|--------|--------|:----:|------|
| BC-ING | DataSource、IngestionTask | PLC/MES/Matter 协议 | ⚠️ | FD-IN.1 在 11.3.2 扩展；建议 ING 需求表中补一句「工业/家居协议见 FD-IN/FD-HA」|
| BC-CAT | DataAsset、MetadataEntry | 场景包(ScenePackage) | ⚠️ | 职责含场景包，但聚合仅 DataAsset、MetadataEntry；**建议**：场景包可作为 MetadataEntry 的 Schema 扩展或新增 ScenePackage 值对象 |
| BC-ORC | OrchestrationTask、DataFlow | 成本运营看板 | ✅ | ORC-06 已补充；调用成本核算服务 |
| BC-ANN | AnnotationTask、AnnotationResult、QCItem | QCItem 归属 | △ | QCItem 可能更宜作为 AnnotationTask 下实体；若质检单独立生命周期则保持现状 |
| BC-BHV | BehaviorSession、ProblemSample | 工业 PLC/传感器 | ✅ | BHV-01.1 AC 已补充工业场景支持 |
| BC-GOV | AuditRecord、DataClassification、DeploymentTopology | 部署拓扑 | ✅ | GOV-03、GOV-06 覆盖私有化、多租户、政务云 |

#### 三、领域事件与命令完备性

| 检查项 | 状态 | 说明 |
|--------|:----:|------|
| 核心业务流程事件 | ✅ | 接入→注册→编排→标注→仿真→回灌→OTA 全链路事件完整 |
| 用户故事 5（成本看板）| ⚠️ | RequestCostDashboard 命令已列；无可写事件；看板为读模型/查询侧，可接受 |
| 场景挖掘 | ✅ | RequestSceneMining 命令；CAT-06 需求；场景挖掘服务 |
| BC-GOV 部署变更 | ✅ | DeploymentTopologyConfigured 事件 |

#### 四、与 01.市场调研闭环对齐

| 01 调研环节 | 02 对应 BC | 状态 |
|-------------|------------|:----:|
| 数据采集 | BC-ING | ✅ |
| 数据传输与编排 | BC-ING、BC-ORC | ✅ |
| 数据标注 | BC-ANN、BC-CAT | ✅ |
| 仿真与合成 | BC-SIM | ✅ |
| 训练与回灌 | 训练平台(外部)、BC-BHV、BC-ORC | ✅ |
| OTA 与模型部署 | BC-OTA | ✅ |
| 智能体行为分析与可视化 | BC-BHV、BC-CAT | ✅ |
| 合规与治理 | BC-GOV | ✅ |

#### 五、待完善项汇总（按优先级）

| 优先级 | 建议项 | 涉及章节 |
|:------:|--------|----------|
| P1 | ~~补充 ORC-06~~ | ✅ 已实施（5.3.4、11.2）|
| P1 | ~~BHV-01.1 工业信号 AC~~ | ✅ 已实施（5.6.4）|
| P2 | **BC-CAT** 场景包：明确 ScenePackage 为聚合、值对象或 MetadataEntry 扩展 | 5.2.2、4.3 |
| P2 | **ING** 需求表脚注：工业/家居协议见 FD-IN.1、FD-HA.1 | 5.1.4 |
| P3 | QCItem 聚合边界：若质检单无独立生命周期，可调整为 AnnotationTask 下实体 | 6.1 |

#### 六、结论

领域建模与限界上下文**整体完备**，8 个 BC 覆盖数据闭环全链路与 6 行业用户故事。上述 P1～P3 为细化增强项，不影响核心建模正确性。

---

## 目录

- [完善度评估](#完善度评估)
  - [领域建模完备性检查](#领域建模完备性检查)
- [一、用户识别（完整）](#一用户识别完整)
  - [1.1 用户识别维度说明](#11-用户识别维度说明)
  - [1.2 用户角色总览（按行业 × 组织 × 层级）](#12-用户角色总览按行业--组织--层级)
  - [1.3 用户角色汇总表](#13-用户角色汇总表按角色层级分类)
  - [1.4 用户与限界上下文映射](#14-用户与限界上下文映射)
  - [1.5 用户识别检查清单](#15-用户识别检查清单)
- [二、用户故事大表](#二用户故事大表)
  - [2.0 表结构说明](#20-表结构说明)
  - [2.7 用户故事统计](#27-用户故事统计)
  - [2.7.1 用户旅程图（C1）](#271-用户旅程图c1)
  - [2.8 用户故事细化补充](#28-用户故事细化补充按场景与验收要点)
  - [2.9 用户故事与需求/用例映射表](#29-用户故事与需求用例映射表)
  - [2.10 按 BC 分类的用户故事索引](#210-按-bc-分类的用户故事索引)
  - [2.11 用户故事优先级矩阵](#211-用户故事优先级矩阵p0-必选)
- [三、领域驱动设计概述](#三领域驱动设计概述)
  - [3.1 为何采用 DDD](#31-为何采用-ddd)
  - [3.2 分析范围与边界](#32-分析范围与边界)
- [四、战略设计](#四战略设计)
  - [4.1 子域划分](#41-子域划分)
  - [4.2 限界上下文识别](#42-限界上下文识别)
  - [4.3 统一语言（Ubiquitous Language）](#43-统一语言ubiquitous-language)
- [五、限界上下文详细建模](#五限界上下文详细建模)
- [六、战术设计](#六战术设计)
- [七、事件风暴](#七事件风暴)
- [八、上下文映射](#八上下文映射)
- [九、用户与干系人](#九用户与干系人)
- [十、非功能需求](#十非功能需求)
- [十一、需求追溯矩阵](#十一需求追溯矩阵)
  - [11.3 分行业差异化](#113-分行业差异化上下文内扩展)
- [附录 A：领域事件清单（完整）](#附录-a领域事件清单完整)
- [附录 B：与产品框架的对应关系](#附录-b与产品框架的对应关系)
- [附录 C：典型用例详表（DDD 视角）](#附录-c典型用例详表ddd-视角)
- [附录 D：子需求完整分解（按上下文）](#附录-d子需求完整分解按上下文)

---


## 一、用户识别（完整）

> **前置说明**：用户故事分析（角色→功能需求→功能价值）依赖对用户的完整识别。本节尽可能穷举数据闭环工具链的**全部用户角色**，按行业、组织类型、角色层级、具体角色四维展开，为后续「用户故事超级大表」提供用户池。

### 1.1 用户识别维度说明

| 维度 | 说明 | 取值 |
|------|------|------|
| **行业** | 用户所在业务领域 | 智驾、智能家居、具身智能、工业、物联网、政府/园区 |
| **组织类型** | 用户所在企业类型 | OEM、Tier1、Robotaxi、家居生态、机器人公司、工业/物联网企业、政府/平台商 |
| **角色层级** | Leader/研发/支持 | Leader：决策、规划、资源；研发：执行、交付；支持：采购、合规、运维 |
| **具体角色** | 岗位名称 | 智驾负责人、算法工程师、数据工程师等 |

### 1.2 用户角色总览（按行业 × 组织 × 层级）

#### 1.2.1 智驾/自动驾驶

| 组织类型 | 角色层级 | 具体角色 | 职责摘要 | 工具链触点 | 数据来源 |
|----------|----------|----------|----------|------------|----------|
| **OEM/主机厂** | Leader | 智驾负责人 | 智驾整体规划、预算、供应商选型；对合规、成本、交付周期负责 | 技术选型、PoC 评审、年度预算 | 01 调研 6.4.2 |
| **OEM/主机厂** | Leader | 数据平台负责人 | 数据闭环架构、车云编排、与云集成；对数据质量、迭代效率负责 | 架构选型、编排规则、存储成本 | 01 调研 6.4.2 |
| **OEM/主机厂** | Leader | 采购 | 商务谈判、合同、供应商管理 | 预算审批、合同签署 | 01 调研 6.4.2 |
| **OEM/主机厂** | 研发 | 感知算法工程师 | 感知模型训练、数据需求定义、问题样本分析 | 数据检索、标注质量、行为回放、根因定位 | 01 调研 4.1 |
| **OEM/主机厂** | 研发 | 规划/决策算法工程师 | 规划与决策模型；需行为回放、轨迹分析 | 行为可视化、问题样本挖掘 | 01 调研 6.1.7 |
| **OEM/主机厂** | 研发 | 数据工程师 | 数据接入、元数据管理、任务编排、与训练平台对接 | 多源接入、目录检索、车云编排 | 01 调研 6.1.2 |
| **OEM/主机厂** | 研发 | 标注项目经理 | 标注任务分配、预标注配置、质检流程、交付周期 | 标注平台、预标注、质检流水线 | 01 调研 6.4.2 |
| **OEM/主机厂** | 研发 | 标注质检员 | 人工抽检、复检、标注修正 | 标注界面、质检单 | 01 调研 6.1.4 |
| **OEM/主机厂** | 研发 | 仿真工程师 | 驾驶仿真场景配置、极端场景生成、仿真数据产出 | 仿真平台、OpenSCENARIO、与标注闭环 | 01 调研 4.1 |
| **OEM/主机厂** | 研发 | OTA/发布工程师 | 模型/固件 OTA 推送、灰度策略、回滚 | OTA 平台、与训练平台对接 | 01 调研 6.2.8 |
| **OEM/主机厂** | 支持 | 法务/合规 | 数据合规、出境备案、供应商合规审查 | 审计日志、脱敏、备案支持 | 01 调研 6.3 |
| **Tier1** | Leader | CTO | 技术路线、自建 vs 外包、供应商选型 | 技术评估、竞品对比 | 01 调研 6.4.3 |
| **Tier1** | Leader | 算法负责人 | 算法团队管理、标注需求、多主机厂数据隔离 | 标注质量、自动化率、多租户 | 01 调研 6.4.3 |
| **Tier1** | Leader | 采购 | 供应商对比、年框协议 | 商务谈判 | 01 调研 6.4.3 |
| **Tier1** | 研发 | 算法工程师 | 多主机厂项目、标注数据消费、模型训练 | 标注平台、数据检索、API 导出 | 01 调研 6.4.3 |
| **Tier1** | 研发 | 标注/数据项目经理 | 标注任务管理、交付质量、成本控制 | 标注平台、预标注、质检 | 01 调研 6.4.3 |
| **Robotaxi/出行** | Leader | 智驾/数据负责人 | 运营+采集一体化、众源数据、标注产能 | 数据闭环、标注外包 | 01 调研 9.1 如祺 |
| **Robotaxi/出行** | 研发 | 算法工程师 | 路测数据、4D 标注、场景挖掘 | 采集、标注、行为分析 | 01 调研 9.1 |

#### 1.2.2 智能家居

| 组织类型 | 角色层级 | 具体角色 | 职责摘要 | 工具链触点 | 数据来源 |
|----------|----------|----------|----------|------------|----------|
| **家居生态（小米/华为/美的等）** | Leader | 产品经理 | 主动智能场景定义、用户隐私、跨品牌体验 | 场景意图、用户行为数据 | 01 调研 6.4.4 |
| **家居生态** | Leader | AI 负责人 | 数据闭环建设、标注工具选型、与 APP/云端集成 | 跨品牌接入、场景标注、隐私合规 | 01 调研 6.4.4 |
| **家居生态** | 研发 | 算法工程师 | 用户意图理解、场景策略、多模态学习 | 数据接入、标注、行为分析 | 01 调研 4.2 |
| **家居生态** | 研发 | 数据工程师 | 设备数据接入、Matter 协议、跨品牌数据汇聚 | 多源接入、元数据 | 01 调研 6.1.2 |

#### 1.2.3 具身智能/人形机器人

| 组织类型 | 角色层级 | 具体角色 | 职责摘要 | 工具链触点 | 数据来源 |
|----------|----------|----------|----------|------------|----------|
| **人形机器人公司** | Leader | 算法负责人 | 数据采集、仿真、标注策略；自建 vs 采购 | 仿真、标注、OTA | 01 调研 6.4.5 |
| **人形机器人公司** | Leader | 仿真负责人 | 仿真平台选型、Real2Sim、成本与产能 | 物理仿真、动作合成、XIL | 01 调研 4.3.1 |
| **人形机器人公司** | 研发 | 算法工程师 | 策略训练、动作序列、多模态（视觉+触觉+力控）| 仿真数据、动作标注、行为分析 | 01 调研 4.3 |
| **人形机器人公司** | 研发 | 仿真工程师 | 仿真场景配置、动作合成、sim-to-real 验证 | 仿真平台、MuJoCo/Isaac | 01 调研 4.3.1 |
| **人形机器人公司** | 研发 | 遥操作/数据工程师 | 遥操作数据采集、仿真数据与真实数据闭环 | 数据接入、多源融合 | 01 调研 4.3 |

#### 1.2.4 工业/物联网

| 组织类型 | 角色层级 | 具体角色 | 职责摘要 | 工具链触点 | 数据来源 |
|----------|----------|----------|----------|------------|----------|
| **智能工厂/离散制造** | Leader | 数字化负责人 | 智能工厂建设、预测性维护、数据治理 | 边缘部署、MES 集成、预测性维护 | 01 调研 6.4.6 |
| **智能工厂** | Leader | IT 负责人 | 平台选型、与华为/用友等平台商合作、数据安全 | 边缘网关、API 集成、合规 | 01 调研 6.4.6 |
| **智能工厂** | 研发 | 工业数据工程师 | 产线数据接入、PLC/MES/传感器、数据质量 | 多源接入、元数据、边缘 Agent | 01 调研 6.1.2 |
| **智能工厂** | 研发 | 算法/预测工程师 | 预测性维护模型、故障预测、异常检测 | 数据检索、标注、行为分析 | 01 调研 4.4 |
| **智能工厂** | 研发 | 产线/设备工程师 | 设备状态监控、故障追溯、维护决策 | 行为回放、信号分析、根因定位 | 01 调研 6.1.7 |
| **工业互联网平台商** | Leader | 平台产品负责人 | 平台能力、第三方工具链集成、场景包 | API 开放、场景包 | 01 调研 4.5 |
| **工业互联网平台商** | 研发 | 平台开发/集成工程师 | 与工具链供应商对接、场景包开发 | API、数据格式 | 01 调研 9.2 |
| **物联网/边缘场景** | 研发 | 边缘/嵌入式工程师 | 边缘数据处理、实时性、带宽优化 | 边缘 Agent、压缩、过滤 | 01 调研 6.1.6 |

#### 1.2.5 政府/园区

| 组织类型 | 角色层级 | 具体角色 | 职责摘要 | 工具链触点 | 数据来源 |
|----------|----------|----------|----------|------------|----------|
| **政府/智慧城市** | Leader | 智慧城市/工业互联网项目负责人 | 试点城市、工业互联网平台、数据底座选型 | 数据底座、政务云、信创 | 03 产品框架 4.1 |
| **政府/园区** | 支持 | 合规/数据安全负责人 | 数据主权、跨境、分级分类 | 合规治理、审计 | 01 调研 6.3 |

#### 1.2.6 工具链供应商内部（我方）

| 组织类型 | 角色层级 | 具体角色 | 职责摘要 | 工具链触点 |
|----------|----------|----------|----------|------------|
| **供应商** | Leader | 产品经理 | 需求分析、用户故事、产品规划 | 全链路 |
| **供应商** | Leader | 架构师 | 领域建模、技术选型、上下文边界 | 全链路 |
| **供应商** | 研发 | 开发工程师 | 功能实现、API、前后端 | 各 BC |
| **供应商** | 研发 | 测试/QA | 验收、自动化测试 | 各 BC |
| **供应商** | 支持 | 销售/售前 | PoC、演示、客户触达 | 全链路 |
| **供应商** | 支持 | 交付/实施 | 私有化部署、集成、培训 | 全链路 |

### 1.3 用户角色汇总表（按角色层级分类）

> 便于用户故事分析时按「Leader / 研发 / 支持」快速定位。

| 角色层级 | 角色名称（去重）| 主要行业 | 数量 |
|----------|----------------|----------|------|
| **Leader** | 智驾负责人、数据平台负责人、CTO、算法负责人、仿真负责人、产品经理、AI 负责人、数字化负责人、IT 负责人、采购、平台产品负责人、智慧城市负责人 | 智驾、家居、具身、工业、政府 | 12+ |
| **研发** | 感知算法工程师、规划/决策算法工程师、数据工程师、标注项目经理、标注质检员、仿真工程师、OTA/发布工程师、算法工程师、遥操作/数据工程师、工业数据工程师、预测工程师、产线/设备工程师、平台开发/集成工程师、边缘/嵌入式工程师 | 智驾、家居、具身、工业 | 14+ |
| **支持** | 法务/合规、采购、合规/数据安全负责人 | 全行业 | 3+ |
| **供应商** | 产品经理、架构师、开发、测试、销售、交付 | 内部 | 6 |

### 1.4 用户与限界上下文映射

> 每个角色主要接触哪些 BC，便于用户故事按 BC 归类。

| 角色（选列）| BC-ING | BC-CAT | BC-ORC | BC-ANN | BC-SIM | BC-BHV | BC-OTA | BC-GOV |
|-------------|:------:|:------:|:------:|:------:|:------:|:------:|:------:|:------:|
| 数据工程师 | ● | ● | ● | — | — | — | — | — |
| 算法工程师 | — | ● | — | ● | ● | ● | — | — |
| 标注项目经理 | — | ● | — | ● | ● | — | — | — |
| 标注质检员 | — | — | — | ● | — | — | — | — |
| 仿真工程师 | — | ● | — | ● | ● | — | — | — |
| OTA/发布工程师 | — | — | ● | — | — | — | ● | — |
| 智驾/数据负责人 | ● | ● | ● | ● | ● | ● | ● | ● |
| 法务/合规 | — | — | — | — | — | — | — | ● |

### 1.5 用户识别检查清单

> 用于验证用户识别完整性；后续用户故事表应对以下每类至少覆盖 1 条。

- [ ] **智驾**：OEM Leader 3 类、OEM 研发 7 类、Tier1 3 类、Robotaxi 2 类
- [ ] **智能家居**：Leader 2 类、研发 2 类
- [ ] **具身智能**：Leader 2 类、研发 3 类
- [ ] **工业**：Leader 2 类、研发 4 类、平台商 2 类
- [ ] **物联网**：研发 1 类
- [ ] **政府**：Leader 1 类、支持 1 类
- [ ] **供应商内部**：6 类

---


## 二、用户故事大表

> 基于第一节用户识别，按「角色 → 功能需求 → 功能价值」格式产出用户故事。**表结构说明**见 [2.0](#20-表结构说明)。

### 2.0 表结构说明

| 列名 | 说明 | 取值/格式 |
|------|------|----------|
| **序号** | 唯一编号 | US-001～US-xxx |
| **角色** | 用户角色（含行业/组织标注）| 如「感知算法工程师」「CTO（Tier1）」|
| **角色层级** | Leader / 研发 / 支持 | 决策、执行、支撑 |
| **组织类型** | 用户所在组织 | OEM、Tier1、Robotaxi、家居生态、机器人公司、智能工厂、平台商、政府、供应商 |
| **功能需求** | 用户需要的具体能力 | 简短描述 |
| **功能价值** | 带来的收益或问题解决 | 简短描述 |
| **用户故事（完整）** | 「作为…我需要…以便于…」| 标准用户故事格式 |
| **涉及 BC** | 对应的限界上下文 | BC-ING、BC-CAT 等 |
| **优先级** | 需求优先级 | P0 / P1 |
| **关联需求 ID** | 对应第五/十一章需求编号 | ING-01、ANN-01、BHV-01 等 |

### 2.1 智驾/自动驾驶

| 序号 | 角色 | 角色层级 | 组织类型 | 功能需求 | 功能价值 | 用户故事（完整）| 涉及 BC | 优先级 | 关联需求 |
|:----:|------|----------|----------|----------|----------|-----------------|---------|:------:|----------|
| 1 | 智驾负责人 | Leader | OEM | 端到端数据闭环平台（采集→标注→仿真→OTA）| 合规、成本可控、交付周期可承诺 | 作为智驾负责人，我需要一套端到端数据闭环平台，覆盖采集、标注、仿真、OTA 全链路，以便于满足合规要求、控制成本、承诺交付周期 | BC-全 | P0 | — |
| 2 | 智驾负责人 | Leader | OEM | 供应商技术评估与 PoC 支持 | 选型决策有据可依 | 作为智驾负责人，我需要在技术选型阶段获得产品演示与 PoC 方案，以便于对比供应商并做出选型决策 | — | P0 | — |
| 2a | 智驾负责人 | Leader | OEM | 主机厂/车型案例背书 | 降低选型风险 | 作为智驾负责人，我需要供应商提供已落地主机厂、车型案例与效果数据，以便于降低选型与落地风险 | — | P0 | — |
| 2b | 采购 | Leader | OEM | 按车/按车型/包年等灵活定价 | 预算可控、合同清晰 | 作为 OEM 采购，我需要供应商提供按车、按车型、包年等灵活定价模式，以便于预算规划与合同谈判 | — | P0 | — |
| 3 | 数据平台负责人 | Leader | OEM | 车云编排与成本优化 | 传输/存储成本显著下降 | 作为数据平台负责人，我需要车云编排能力，支持百倍压缩、按规则落盘、分钟级到桌面，以便于将传输与存储成本降低 70% 以上 | BC-ING、BC-ORC | P0 | ORC-04 |
| 4 | 数据平台负责人 | Leader | OEM | 与现有云（阿里/腾讯/华为）无缝集成 | 不重复建设、快速落地 | 作为数据平台负责人，我需要工具链与 OSS/Kafka/K8s 等现有云资源无缝集成，以便于基于已有基础设施快速搭建闭环 | BC-ING、BC-ORC、BC-CAT | P0 | ING、NF-12 |
| 5 | 数据平台负责人 | Leader | OEM | 闭环效率与成本运营看板 | 掌握各环节 ROI、优化决策 | 作为数据平台负责人，我需要闭环各环节的吞吐、周期、成本运营分析看板，以便于评估投入产出并优化资源配置 | BC-ORC、BC-GOV | P1 | — |
| 6 | 感知算法工程师 | 研发 | OEM | 数据可视化与行为回放工具 | 高效分析问题、定位根因 | 作为感知算法工程师，我需要一个数据可视化工具，能分析车端产生的视频、IMU、轨迹、感知输出等所有数据，并在统一时间轴呈现，以便于我高效分析问题、定位感知/决策/控制根因 | BC-BHV、BC-CAT | P1 | BHV-01～04 |
| 7 | 感知算法工程师 | 研发 | OEM | 高质量标注数据（99.9%+ 准确率）| 模型训练效果有保障 | 作为感知算法工程师，我需要标注数据达到 99.9% 以上准确率，以便于训练出可靠的感知模型 | BC-ANN | P0 | ANN-04 |
| 8 | 感知算法工程师 | 研发 | OEM | 按场景/长尾筛选数据集 | 补齐长尾、提升泛化 | 作为感知算法工程师，我需要按场景类型、长尾标签筛选数据集，以便于针对性补齐稀缺场景数据 | BC-CAT、BC-ANN | P0 | CAT-03、06 |
| 9 | 规划/决策算法工程师 | 研发 | OEM | 行为回放与轨迹分析 | 理解规划决策逻辑、定位问题 | 作为规划/决策算法工程师，我需要将规划路径、行为意图、决策输出与视频/地图叠加回放，以便于分析规划决策是否合理、快速定位问题环节 | BC-BHV | P1 | BHV-02～03 |
| 10 | 规划/决策算法工程师 | 研发 | OEM | 问题样本导出与回灌 | 驱动下一轮采集与训练 | 作为规划/决策算法工程师，我需要将问题样本（如接管、顿挫）导出至标注或回灌流程，以便于驱动下一轮数据采集与模型迭代 | BC-BHV、BC-ORC | P1 | BHV-04 |
| 11 | 数据工程师 | 研发 | OEM | 多源数据统一接入 | 打通数据孤岛、统一目录 | 作为数据工程师，我需要支持 OSS/Kafka/MQTT/RDS 等多源数据的统一接入，以便于将采集车、量产车、仿真平台数据汇聚到统一目录 | BC-ING、BC-CAT | P0 | ING-01～03 |
| 12 | 数据工程师 | 研发 | OEM | 元数据检索与血缘追溯 | 快速定位数据、追溯来源 | 作为数据工程师，我需要在百万级数据下快速检索元数据，并追溯从采集到标注的血缘，以便于定位数据、排查问题 | BC-CAT | P0 | CAT-03、04 |
| 13 | 数据工程师 | 研发 | OEM | 车云编排配置与任务调度 | 车端数据分钟级到桌面 | 作为数据工程师，我需要配置车云编排规则与任务调度，以便于车端落盘后数据在 10 分钟内可被检索 | BC-ORC | P0 | ORC-04 |
| 14 | 数据工程师 | 研发 | OEM | 与训练平台 API 对接 | 标注数据自动导入训练 | 作为数据工程师，我需要标注结果通过 API 导出至训练平台指定格式，以便于训练流水线自动消费 | BC-ANN | P1 | ANN-06 |
| 15 | 标注项目经理 | 研发 | OEM | 预标注 + 人工质检流水线 | 提升效率、保障质量 | 作为标注项目经理，我需要预标注编排与多级质检流水线，以便于在自动化率 60%+ 前提下保障 99.9% 准确率 | BC-ANN、BC-ORC | P0 | ANN-03～05 |
| 16 | 标注项目经理 | 研发 | OEM | 标注任务分配与进度看板 | 把控交付周期、成本 | 作为标注项目经理，我需要标注任务分配、进度与质量看板，以便于把控交付周期与成本 | BC-ANN | P0 | ANN-05 |
| 17 | 标注项目经理 | 研发 | OEM | 4D/时序、BEV 标注能力 | 满足智驾标注需求 | 作为标注项目经理，我需要 4D 连续帧、BEV 视图、点云分割等标注能力，以便于满足智驾多模态标注需求 | BC-ANN | P0 | ANN-02、FD-AD.3 |
| 18 | 标注质检员 | 研发 | OEM | 易用的标注与质检界面 | 高效抽检、复检、修正 | 作为标注质检员，我需要易用的标注与质检界面，支持多级质检与通过阈值配置，以便于高效完成抽检、复检与修正 | BC-ANN | P0 | ANN-05 |
| 19 | 仿真工程师 | 研发 | OEM | 驾驶仿真与极端场景生成 | 补齐长尾、降本 | 作为仿真工程师，我需要 OpenSCENARIO/OpenDRIVE 兼容的驾驶仿真平台，可生成极端场景，以便于补齐长尾数据、降低真机测试成本 | BC-SIM | P1 | SIM-01、FD-AD.4 |
| 20 | 仿真工程师 | 研发 | OEM | 仿真数据与标注/训练闭环 | 仿真产出可直接用于训练 | 作为仿真工程师，我需要仿真生成数据可进入标注流水线、标注后导入训练，以便于形成仿真→标注→训练的闭环 | BC-SIM、BC-ANN、BC-CAT | P1 | SIM-04 |
| 21 | OTA/发布工程师 | 研发 | OEM | OTA 发布与灰度回滚 | 安全、可控地将模型推送到车端 | 作为 OTA/发布工程师，我需要 SOTA/FOTA/DOTA 发布能力，支持灰度策略与回滚，以便于安全、可控地将优化后的模型/固件推送到车端 | BC-OTA | P1 | OTA-01、03 |
| 22 | OTA/发布工程师 | 研发 | OEM | 与训练平台对接触发 OTA | 训练完成即触发发布 | 作为 OTA/发布工程师，我需要模型训练完成后可触发 OTA 任务，支持版本管理，以便于形成训练→OTA 的自动化闭环 | BC-OTA | P1 | OTA-02 |
| 23 | 法务/合规 | 支持 | OEM | 审计日志与操作追溯 | 满足《个保法》《数安法》合规 | 作为法务/合规，我需要关键操作的全量审计日志与导出能力，以便于满足合规要求、配合监管检查 | BC-GOV | P0 | GOV-02 |
| 24 | 法务/合规 | 支持 | OEM | 脱敏与数据出境备案支持 | 数据出境合规 | 作为法务/合规，我需要脱敏能力与数据出境清单导出，以便于配合出境备案流程 | BC-GOV | P0 | GOV-01、05 |
| 25 | CTO | Leader | Tier1 | 多主机厂数据隔离与标注质量 | 多项目并行、质量可控 | 作为 Tier1 的 CTO，我需要多租户数据隔离与 99.9%+ 标注质量，以便于同时服务多主机厂、保障交付稳定性 | BC-ANN、BC-GOV | P0 | ANN-04、GOV-03 |
| 26 | 算法负责人 | Leader | Tier1 | 标注自动化率与成本 | 降本、提升产能 | 作为 Tier1 算法负责人，我需要预标注自动化率 60%+、可配置质检流程，以便于降低标注成本、提升产能 | BC-ANN | P0 | ANN-03～04 |
| 27 | 算法工程师 | 研发 | Tier1 | 标注数据 API 导出 | 与自建训练流水线对接 | 作为 Tier1 算法工程师，我需要标注结果通过 API 导出至指定格式，以便于与自建训练流水线对接 | BC-ANN | P1 | ANN-06 |
| 27a | 标注/数据项目经理 | 研发 | Tier1 | 私有化部署与多租户 | 数据不出客户环境 | 作为 Tier1 标注项目经理，我需要支持私有化部署与多租户隔离，以便于数据不出客户环境、满足主机厂要求 | BC-GOV | P0 | GOV-03 |
| 28 | 智驾/数据负责人 | Leader | Robotaxi | 运营+采集一体化数据闭环 | 低成本获取路测数据 | 作为 Robotaxi 智驾负责人，我需要运营车辆与采集车数据的一体化闭环，以便于低成本获取路测数据、支撑 4D 标注 | BC-ING、BC-ORC、BC-ANN | P0 | ING、ORC、ANN |
| 28a | 算法工程师 | 研发 | Robotaxi | 4D 标注与场景挖掘 | 路测数据高效利用 | 作为 Robotaxi 算法工程师，我需要 4D 连续帧标注与场景挖掘能力，以便于将路测数据高效转化为训练数据 | BC-ANN、BC-CAT | P0 | ANN-02、CAT-06 |

### 2.2 智能家居

| 序号 | 角色 | 角色层级 | 组织类型 | 功能需求 | 功能价值 | 用户故事（完整）| 涉及 BC | 优先级 | 关联需求 |
|:----:|------|----------|----------|----------|----------|-----------------|---------|:------:|----------|
| 29 | 产品经理 | Leader | 家居生态 | 跨品牌设备数据汇聚 | 支撑主动智能、跨品牌体验 | 作为智能家居产品经理，我需要跨品牌设备数据的统一接入与目录，以便于支撑主动智能与跨品牌场景体验 | BC-ING、BC-CAT | P1 | FD-HA.1～2 |
| 30 | AI 负责人 | Leader | 家居生态 | 场景意图标注与用户行为学习 | 优化场景策略 | 作为智能家居 AI 负责人，我需要场景标注、用户意图标签与用户行为分析能力，以便于优化主动智能场景策略 | BC-ANN、BC-CAT | P1 | FD-HA.3 |
| 31 | AI 负责人 | Leader | 家居生态 | 隐私保护与合规 | 用户信任、法规合规 | 作为智能家居 AI 负责人，我需要数据脱敏、审计与隐私保护能力，以便于保障用户信任、满足《个保法》要求 | BC-GOV | P0 | GOV-01～02 |
| 32 | 算法工程师 | 研发 | 家居生态 | Matter 协议设备数据接入 | 跨品牌数据融合 | 作为智能家居算法工程师，我需要 Matter 或兼容协议设备的数据接入，以便于实现跨品牌数据融合 | BC-ING | P1 | FD-HA.1 |
| 33 | 数据工程师 | 研发 | 家居生态 | 多品牌 APP/云端数据汇聚 | 统一数据底座 | 作为智能家居数据工程师，我需要多品牌 APP/云端数据的统一接入与元数据目录，以便于构建统一数据底座 | BC-ING、BC-CAT | P1 | FD-HA.2 |

### 2.3 具身智能/人形机器人

| 序号 | 角色 | 角色层级 | 组织类型 | 功能需求 | 功能价值 | 用户故事（完整）| 涉及 BC | 优先级 | 关联需求 |
|:----:|------|----------|----------|----------|----------|-----------------|---------|:------:|----------|
| 34 | 算法负责人 | Leader | 机器人公司 | 仿真与合成数据平台 | 弥补真实数据瓶颈、降本 99%+ | 作为人形机器人算法负责人，我需要物理仿真与合成数据平台，单条成本 ≤ 0.05 元，以便于弥补真实数据瓶颈、大幅降低数据成本 | BC-SIM | P1 | SIM-05、FD-EM.4 |
| 35 | 仿真负责人 | Leader | 机器人公司 | Real2Sim、动作合成、XIL 验证 | 真实场景重建、策略在环验证 | 作为人形机器人仿真负责人，我需要 Real2Sim 场景重建、动作合成与策略在环（XIL）验证能力，以便于从真实场景迁移到仿真、验证策略效果 | BC-SIM | P1 | SIM-02、03、FD-EM.1～2 |
| 36 | 算法工程师 | 研发 | 机器人公司 | 动作序列与多模态标注 | 支撑策略与动作学习 | 作为人形机器人算法工程师，我需要关节角度、轨迹、力控等多模态标注能力，以便于支撑策略与动作序列学习 | BC-ANN | P1 | FD-EM.3 |
| 37 | 算法工程师 | 研发 | 机器人公司 | 仿真数据与行为回放 | 分析策略表现、定位问题 | 作为人形机器人算法工程师，我需要仿真数据与真实数据的统一行为回放与根因定位，以便于分析策略表现、定位 sim-to-real 差异 | BC-BHV、BC-SIM | P1 | BHV-01～04 |
| 38 | 仿真工程师 | 研发 | 机器人公司 | MuJoCo/Isaac 兼容仿真平台 | 可扩展、可批量 | 作为人形机器人仿真工程师，我需要 MuJoCo/Isaac 或兼容物理引擎的仿真平台，日产能 ≥ 5,000 条/集群，以便于批量生成仿真数据 | BC-SIM | P1 | SIM-02、FD-EM.4 |
| 39 | 遥操作/数据工程师 | 研发 | 机器人公司 | 遥操作与仿真数据闭环 | 多源数据融合 | 作为人形机器人遥操作/数据工程师，我需要遥操作、仿真、视频等多源数据的统一接入与闭环，以便于多源数据融合用于训练 | BC-ING、BC-CAT、BC-SIM | P1 | ING、SIM-04 |
| 40 | 算法负责人 | Leader | 机器人公司 | 模型/策略 OTA 到机器人 | 完成闭环、持续迭代 | 作为人形机器人算法负责人，我需要将优化后的模型/策略通过 OTA 推送到机器人，以便于完成数据闭环、持续迭代 | BC-OTA | P1 | OTA-01～04 |

### 2.4 工业/物联网

| 序号 | 角色 | 角色层级 | 组织类型 | 功能需求 | 功能价值 | 用户故事（完整）| 涉及 BC | 优先级 | 关联需求 |
|:----:|------|----------|----------|----------|----------|-----------------|---------|:------:|----------|
| 41 | 数字化负责人 | Leader | 智能工厂 | 边缘部署与 MES/ERP 集成 | 产线数据打通、预测性维护 | 作为智能工厂数字化负责人，我需要边缘部署能力以及与 MES/ERP 的集成，以便于打通产线数据、支撑预测性维护 | BC-ING、BC-ORC、BC-CAT | P0 | FD-IN.1～2 |
| 42 | IT 负责人 | Leader | 智能工厂 | 平台选型与数据安全 | 与华为/用友等平台合作、合规 | 作为智能工厂 IT 负责人，我需要与主流工业互联网平台的 API 集成及数据安全能力，以便于选型落地、满足合规 | BC-ING、BC-GOV | P0 | FD-IN.2、GOV |
| 43 | 工业数据工程师 | 研发 | 智能工厂 | PLC/MES/传感器多源接入 | 产线数据入湖 | 作为工业数据工程师，我需要 PLC、MES、传感器、摄像头等多类数据源接入，单工厂设备 ≥ 500，以便于产线数据入湖 | BC-ING | P0 | FD-IN.1 |
| 44 | 工业数据工程师 | 研发 | 智能工厂 | 边缘网关与 5G 专网部署 | 实时、低延迟 | 作为工业数据工程师，我需要边缘网关与 5G 专网部署能力，以便于实现实时、低延迟的数据采集与处理 | BC-ING | P0 | FD-IN.4 |
| 45 | 算法/预测工程师 | 研发 | 智能工厂 | 设备行为分析与故障预测数据 | 预测性维护准确率 ≥ 80% | 作为工业预测工程师，我需要设备行为分析与故障预测所需的标注与数据支持，以便于构建准确率 ≥ 80% 的预测模型 | BC-BHV、BC-ANN、BC-CAT | P1 | FD-IN.3 |
| 46 | 产线/设备工程师 | 研发 | 智能工厂 | 行为回放与信号分析 | 故障追溯、根因定位 | 作为产线设备工程师，我需要视频、PLC/传感器信号、执行器输出的统一回放与信号分析，以便于故障追溯与根因定位 | BC-BHV | P1 | BHV-01～04 |
| 47 | 平台产品负责人 | Leader | 平台商 | 开放 API 与场景包集成 | 平台生态扩展 | 作为工业互联网平台产品负责人，我需要工具链供应商的开放 API 与场景包，以便于扩展平台能力、集成第三方工具 | BC-ANN、BC-CAT、BC-ORC | P1 | ANN-06 |
| 48 | 平台开发/集成工程师 | 研发 | 平台商 | 标准 API 与数据格式 | 快速对接工具链 | 作为工业平台开发工程师，我需要工具链的标准 API 与数据格式文档，以便于快速对接与集成 | BC-ANN、BC-CAT | P1 | ANN-06 |
| 49 | 边缘/嵌入式工程师 | 研发 | 物联网 | 边缘 Agent 与本地压缩过滤 | 延迟 < 100ms、带宽省 50%+ | 作为物联网边缘工程师，我需要边缘侧轻量 Agent，支持本地压缩、按规则过滤，以便于实现延迟 < 100ms、带宽节省 50% 以上 | BC-ING | P1 | FD-IoT.1～2 |

### 2.5 政府/园区

| 序号 | 角色 | 角色层级 | 组织类型 | 功能需求 | 功能价值 | 用户故事（完整）| 涉及 BC | 优先级 | 关联需求 |
|:----:|------|----------|----------|----------|----------|-----------------|---------|:------:|----------|
| 50 | 智慧城市/工业互联网项目负责人 | Leader | 政府 | 数据底座与政务云/信创适配 | 试点城市、工业互联网落地 | 作为政府工业互联网项目负责人，我需要数据底座能力，支持政务云与信创适配，以便于试点城市与工业互联网平台落地 | BC-CAT、BC-GOV | P1 | CAT、GOV |
| 51 | 合规/数据安全负责人 | 支持 | 政府 | 数据分级分类与审计 | 数据主权、跨境合规 | 作为政府合规负责人，我需要数据分级分类、审计与出境备案支持，以便于保障数据主权、满足跨境合规要求 | BC-GOV | P0 | GOV-02、04、05 |

### 2.6 供应商内部（我方）

| 序号 | 角色 | 角色层级 | 组织类型 | 功能需求 | 功能价值 | 用户故事（完整）| 涉及 BC | 优先级 | 关联需求 |
|:----:|------|----------|----------|----------|----------|-----------------|---------|:------:|----------|
| 52 | 产品经理 | Leader | 供应商 | 用户故事与需求追溯 | 产品规划有据可依 | 作为产品经理，我需要完整的用户故事与需求追溯至限界上下文，以便于产品规划与优先级决策 | 全 | P0 | 本文档 |
| 53 | 架构师 | Leader | 供应商 | 清晰的上下文边界与领域事件 | 技术选型与团队分工 | 作为架构师，我需要清晰的限界上下文边界与领域事件契约，以便于技术选型与团队分工 | 全 | P0 | 第四、六、七章 |
| 54 | 开发工程师 | 研发 | 供应商 | 可验收的功能需求与 AC | 实现有标准、可测试 | 作为开发工程师，我需要每个 BC 的可验收功能需求与 AC，以便于实现有标准、可测试 | 各 BC | P0 | 第五章 |
| 55 | 测试/QA | 研发 | 供应商 | 用例与验收场景 | 测试覆盖完整 | 作为测试工程师，我需要典型用例与验收场景，以便于设计测试用例、保证覆盖完整 | 全 | P0 | 附录 C |
| 56 | 销售/售前 | 支持 | 供应商 | PoC 方案与演示能力 | 客户触达、转化 | 作为销售/售前，我需要在技术选型阶段提供 PoC 方案与演示，以便于客户触达与转化 | 全 | P0 | — |
| 57 | 交付/实施 | 支持 | 供应商 | 私有化部署与集成文档 | 快速交付、培训 | 作为交付工程师，我需要私有化部署能力与集成文档，以便于快速交付、培训客户 | 全 | P0 | NF-15 |

### 2.7 用户故事统计

| 行业 | 故事数 | 角色覆盖 |
|------|:------:|----------|
| 智驾/自动驾驶 | 32 | Leader 5、研发 13、支持 1 |
| 智能家居 | 5 | Leader 2、研发 2 |
| 具身智能 | 7 | Leader 2、研发 4 |
| 工业/物联网 | 9 | Leader 2、研发 6 |
| 政府/园区 | 2 | Leader 1、支持 1 |
| 供应商内部 | 6 | Leader 2、研发 2、支持 2 |
| **合计** | **61** | — |

### 2.7.1 用户旅程图（C1）

> 对高频触点角色绘制用户旅程，便于需求与 BC 映射验证。

**智驾 OEM 数据平台负责人**（车云编排选型）：

| 阶段 | 触点 | 行动 | 涉及 BC |
|------|------|------|---------|
| 需求提出 | 智驾负责人提成本痛点 | 评估车云编排方案 | BC-ORC |
| 技术选型 | PoC 前 1-2 月 | 供应商对比、方案演示 | BC-ING、BC-ORC |
| PoC 验证 | 1-3 月 | 车端对接、压缩效果验证 | BC-ING、BC-ORC、BC-CAT |
| 商务签约 | Q4 预算季 | 合同、部署形态确认 | BC-GOV |
| 上线运营 | 持续 | 成本看板、迭代优化 | BC-ORC、BC-GOV |

**Tier1 标注项目经理**（多主机厂标注）：

| 阶段 | 触点 | 行动 | 涉及 BC |
|------|------|------|---------|
| 项目立项 | 多主机厂项目并行 | 选型标注平台、私有化部署 | BC-ANN、BC-GOV |
| 任务配置 | 日常 | 预标注、质检流水线、多租户隔离 | BC-ANN |
| 交付验收 | 交付前 | 质量 99.9%+、API 导出 | BC-ANN |

**工业数字化负责人**（预测性维护）：

| 阶段 | 触点 | 行动 | 涉及 BC |
|------|------|------|---------|
| 痛点确认 | 试点工厂 | 产线数据接入、MES 集成 | BC-ING、BC-CAT |
| 方案落地 | 3-6 月 | 边缘部署、预测模型训练 | BC-ING、BC-BHV |
| 推广 | 集团内 | 多工厂复制、平台商合作 | BC-ORC、BC-GOV |

---

### 2.8 用户故事细化补充（按场景与验收要点）

> 对高频、关键用户故事做场景细化与验收要点，便于研发实现与测试设计。

| 序号 | 用户故事摘要 | 典型场景 | 验收要点（AC）| 关联用例 |
|:----:|--------------|----------|---------------|----------|
| 6 | 数据可视化与行为回放 | 算法工程师接到路测问题单，需回溯该片段的多维数据 | ① 视频/IMU/轨迹/信号/感知/决策可统一时间轴；② 拖拽时间轴多视图联动；③ 支持按接管/顿挫等筛选 | UC-04 |
| 15 | 预标注+质检流水线 | 标注项目经理创建任务，配置预标注模型，质检员抽检 | ① 预标注自动化率 ≥ 60%；② 质检通过后准确率 ≥ 99.9%；③ 支持初检/复检/抽检多级 | UC-03 |
| 4 | 车云编排与成本优化 | 数据平台负责人配置车端按规则落盘，车云上传规则 | ① 车端到桌面 < 10 分钟；② 压缩比 ≥ 50x；③ 传输/存储成本降幅 ≥ 70% | UC-02 |
| 21 | OTA 发布与灰度回滚 | OTA 工程师从训练平台触发发布，选择灰度批次 | ① 支持分批次推送；② 可回滚至上一版本；③ 与车端通信成功 | UC-05 |
| 2b | 按车/按车型/包年定价 | OEM 采购进行预算规划与合同谈判 | ① 支持按车、按车型、包年等多种计价模式；② 价格透明、合同条款清晰 | — |
| 27a | 私有化部署与多租户 | Tier1 标注项目经理需为多主机厂项目部署私有化实例 | ① 支持私有化部署；② 多租户数据隔离；③ 满足「数据不出客户环境」要求 | GOV-03 |
| 34 | 仿真与合成数据平台 | 具身算法负责人批量生成仿真数据用于训练 | ① 单条 ≤ 0.05 元；② 日产能 ≥ 5,000 条/集群；③ 可进入标注→训练 | UC-06 |

---

### 2.9 用户故事与需求/用例映射表

> 便于从用户故事追溯至功能需求、验收标准与典型用例。

| 需求 ID | 关联用户故事（序号）| 典型用例 |
|---------|---------------------|----------|
| **ING-01～05** | 11、14、32、33、43、44、49 | UC-01 |
| **CAT-01～06** | 8、10、12、15、29、33、41、48、50 | UC-01、UC-03（CAT-06 场景挖掘关联 8、28a）|
| **ORC-01～06** | 4、5、6、13、16、32、41 | UC-02 |
| **ANN-01～06** | 7、9、10、15～21、26、27、28a、30、31、36、45、47、48 | UC-03 |
| **SIM-01～05** | 19、20、22、23、34、35、37、38、39 | UC-06 |
| **BHV-01～04** | 8、9、11、12、13、37、45、46 | UC-04 |
| **OTA-01～04** | 24、25、40 | UC-05 |
| **GOV-01～06** | 23、24、26、27a、31、42、50、51 | 全链路 |

---

### 2.10 按 BC 分类的用户故事索引

> 按限界上下文快速定位相关用户故事，供排期与迭代规划参考。

| 限界上下文 | 用户故事序号 | 主要角色 |
|------------|--------------|----------|
| **BC-ING** | 11、14、16、28、32、33、43、44、49 | 数据工程师、工业数据工程师、边缘工程师 |
| **BC-CAT** | 8、10、12、15、28a、29、33、41、48、50 | 数据工程师、算法工程师、标注项目经理 |
| **BC-ORC** | 4、5、6、13、16、18、28、32、41 | 数据平台负责人、数据工程师、标注项目经理 |
| **BC-ANN** | 7、9、15～21、26、27、28a、30、31、36、45、47、48 | 算法工程师、标注项目经理、质检员 |
| **BC-SIM** | 19、20、22、23、34、35、37、38、39 | 仿真工程师、算法工程师、算法/仿真负责人 |
| **BC-BHV** | 8、9、11、12、13、37、45、46 | 感知/规划算法工程师、产线/设备工程师 |
| **BC-OTA** | 24、25、40 | OTA 工程师、算法负责人（具身）|
| **BC-GOV** | 23、24、26、27a、31、42、50、51 | 法务/合规、CTO、标注项目经理、政府合规负责人 |
| **跨 BC/全链路** | 1、2、2a、2b、3、6、52～57 | 智驾负责人、采购、数据平台负责人、供应商内部 |

---

### 2.11 用户故事优先级矩阵（P0 必选）

> 供 MVP 与 Phase 1 排期参考；P0 故事应优先实现。

| 优先级 | 数量 | 用户故事序号（选列）| 建议 Phase |
|--------|:----:|--------------------|------------|
| **P0** | 39 | 1～7、9、10、14～21、23、24、26、27、27a、28、28a、29、41～44、50、52～54 | Phase 1-2 |
| **P1** | 22 | 6、8、11～13、17、22～25、27、30～40、45～49、51、55～57 | Phase 2-3 |

**按行业×优先级交叉表**：

| 行业 | P0 数量 | P1 数量 | 合计 |
|------|:-------:|:-------:|:----:|
| 智驾/自动驾驶 | 28 | 4 | 32 |
| 智能家居 | 1 | 4 | 5 |
| 具身智能 | 0 | 7 | 7 |
| 工业/物联网 | 4 | 5 | 9 |
| 政府/园区 | 1 | 1 | 2 |
| 供应商内部 | 5 | 1 | 6 |
| **合计** | **39** | **22** | **61** |

---


## 三、领域驱动设计概述

> **建模依据**：本章及第四～七章的领域建模，以**第一章用户识别**与**第二章用户故事大表**为输入。61 条用户故事（39 条 P0）覆盖智驾、智能家居、具身智能、工业、政府、供应商六类角色，驱动限界上下文边界的识别与职责划分。

### 3.1 为何采用 DDD

泛智能数据闭环领域具有以下特征，适合采用 DDD：

| 特征 | 说明 | DDD 应对 |
|------|------|----------|
| **业务复杂** | 采集、传输、标注、仿真、训练、OTA、合规多环节交织；智驾、工业、家居、具身、物联网多行业差异化 | 限界上下文隔离复杂性；子域区分核心/支撑/通用 |
| **多团队协作** | 数据接入、标注、仿真、OTA 等可由不同团队负责 | 上下文边界清晰，契约明确 |
| **领域术语丰富** | 车云编排、预标注、Real2Sim、sim-to-real、OTA 等专业术语 | 统一语言减少歧义 |
| **事件驱动** | 数据接入完成、标注通过、模型部署等可触发下游动作 | 领域事件建模业务事实 |
| **持续演进** | 合成数据占比提升、OTA 闭环、具身仿真等趋势 | 聚合边界保护核心不变性 |

### 3.2 分析范围与边界

- **包含**：工具链层领域（采集、传输、标注、仿真、训练、OTA、合规）；基于客户已有云基础设施
- **排除**：云基础设施层（算力、存储裸资源）；芯片、服务器等底层设施
- **商业域边界**：定价策略、合同条款、商务模式属于商业/销售域，由商业团队负责；本文档提供「计价维度」（如按车/按车型/包年）作为需求输入，详见用户故事 2b

---

## 四、战略设计

> **用户故事驱动**：子域与限界上下文的划分，与第二章用户故事按 BC 的分布（见 [2.10](#210-按-bc-分类的用户故事索引)）保持一致。核心域（ORC、BHV）对应 P0 闭环编排与根因定位故事；支撑域（ANN、SIM、OTA）对应标注、仿真、OTA 闭环；通用域（ING、CAT、GOV）对应多源接入、目录检索、合规与多租户。

### 4.1 子域划分

按 DDD 子域分类，结合**用户故事 P0 分布**，将泛智能数据闭环领域划分为：

| 子域类型 | 子域名称 | 说明 | 关联用户故事（选列）| 建议 |
|----------|----------|------|---------------------|------|
| **核心域** | 闭环编排与回灌决策 | 数据流编排（车云/家云/工业云）、问题样本挖掘、回灌驱动下一轮采集 | 4、13、28、41（车云编排、Robotaxi 一体化）| 自建、深度投入 |
| **核心域** | 智能体行为分析与根因定位 | 车端/产线/机器人多维数据时间轴对齐；根因定位（感知/决策/控制/设备）| 6、9、46、37（行为回放、工业故障追溯、具身 sim-to-real）| 自建 |
| **支撑域** | 标注与质检 | 多模态标注（2D/3D/4D/BEV、动作序列、场景意图）；预标注+质检流水线 | 7、15、17、26、27a、28a、36（智驾/Tier1/Robotaxi/具身）| 自建+行业适配 |
| **支撑域** | 仿真与合成 | 驾驶仿真、具身仿真、Real2Sim；长尾场景补足；单条成本 ≤ 0.05 元 | 19、20、34、35、38、39（智驾+具身）| 自建或合作 |
| **支撑域** | OTA 与模型部署 | 闭环最后一环；车端/机器人/产线设备模型/固件推送 | 21、22、40（智驾、具身）| 自建或集成 |
| **通用域** | 数据接入与 Connector | 多源协议（OSS/Kafka/MQTT/PLC/Matter）；边缘 Agent；MES 集成 | 11、28、32、33、43、44、49（智驾、家居、工业、物联网）| 可复用开源/采购 |
| **通用域** | 元数据与目录 | Omni Catalog、场景挖掘、长尾筛选、多模态 schema、血缘 | 8、12、29、41、48、50（检索、场景包、政务云）| 集成或轻量自建 |
| **通用域** | 任务调度 | K8s、GPU 编排；批处理与流式 | 跨 BC | 集成 K8s/云厂商 |
| **通用域** | 合规与治理 | 脱敏、审计、多租户、私有化部署、数据分级、出境备案 | 23、24、26、27a、31、42、50、51（法务、Tier1、政府）| 集成或采购 |

### 4.2 限界上下文识别

每个限界上下文（Bounded Context, BC）封装一个内聚的模型，有明确的边界与职责。**职责描述**由第一、二章用户角色与用户故事提炼。

| 上下文 ID | 上下文名称 | 职责摘要 | 对应子域 | 关联用户故事 | 核心聚合（见 6.1）|
|-----------|------------|----------|----------|---------------|-------------------|
| **BC-ING** | 数据接入上下文 | 多源统一接入（OSS/Kafka/PLC/Matter/APP 云端）；边缘 Agent；MES/ERP 集成 | 通用域 | 11、28、32、33、43、44、49 | 数据源、接入任务 |
| **BC-CAT** | 数据目录与元数据上下文 | 统一元数据、Omni Catalog、场景挖掘、长尾筛选、血缘、场景包 | 通用域 | 8、12、29、33、41、48、50 | 数据资产、元数据条目 |
| **BC-ORC** | 任务编排上下文 | 车云/家云/工业云数据流编排；成本运营看板；与 K8s 集成 | 核心域 | 4、5、13、28、32、41 | 编排任务、数据流 |
| **BC-ANN** | 标注与质检上下文 | 多模态标注（2D/3D/4D/BEV、动作序列、场景意图）；预标注+质检；API 导出 | 支撑域 | 7、15～21、26、27、28a、30、31、36、45、47、48 | 标注任务、标注结果 |
| **BC-SIM** | 仿真与合成上下文 | 驾驶仿真、具身仿真、Real2Sim、合成数据生成；日产能 ≥ 5,000 条 | 支撑域 | 19、20、34、35、37～39 | 仿真场景、仿真任务 |
| **BC-BHV** | 行为分析与回灌决策上下文 | 车端/产线/机器人多维时间轴对齐；根因定位；问题样本导出与回灌 | 核心域 | 6、8～10、37、45、46 | 行为会话、问题样本 |
| **BC-OTA** | OTA 与模型部署上下文 | SOTA/FOTA/DOTA、灰度回滚；与训练平台对接触发；车/机器人/产线设备 | 支撑域 | 21、22、40 | 发布任务、部署批次 |
| **BC-GOV** | 合规与治理上下文 | 脱敏、审计、多租户、私有化部署、分级分类、出境备案、政务云/信创 | 通用域 | 23、24、26、27a、31、42、50、51 | 审计记录、数据分级、部署拓扑 |

### 4.3 统一语言（Ubiquitous Language）

> 领域专家与研发共用术语，避免歧义。本文档及后续 PRD、代码应统一使用。

#### 4.3.1 核心领域术语

| 术语 | 英文 | 定义 |
|------|------|------|
| **数据闭环** | Data Closed Loop | 采集→处理/标注→仿真验证→模型训练→应用回灌的反馈循环；回灌驱动下一轮采集 |
| **回灌** | Feedback / Backfill | 将问题样本、长尾场景等驱动下一轮数据采集与标注的反馈机制 |
| **车云编排** | Vehicle-Cloud Orchestration | 车端采集、压缩、按规则落盘，与云端存储、训练编排协同的数据流 |
| **预标注** | Pre-labeling | 调用 AI 模型对数据进行自动标注，人工负责校验与修正 |
| **质检流水线** | QC Pipeline | 多级质检（初检、复检、抽检）确保标注质量达标的流程 |
| **仿真数据** | Synthetic Data | 由仿真平台生成的合成数据，用于弥补真实数据的长尾不足 |
| **Real2Sim** | Real-to-Simulation | 从真实场景重建仿真场景的技术 |
| **sim-to-real** | Simulation-to-Real | 仿真中验证的策略迁移到真实环境 |
| **OTA** | Over-The-Air | 远程推送软件/固件/模型到车端、机器人、产线设备 |
| **问题样本** | Problem Sample | 需回灌的样本（如接管、顿挫、标注失败等）|
| **根因定位** | Root Cause Analysis | 分析智能体行为问题属于感知、决策、控制或设备故障哪一环节 |
| **场景挖掘** | Scene Mining | 从数据中挖掘场景类型、长尾标签；支撑按场景/长尾筛选数据集（用户故事 8、28a）|
| **场景包** | Scene Package | 可复用的场景配置集合；供工业平台商等集成（用户故事 47、48）|
| **部署形态** | Deployment Topology | SaaS、私有化、边缘 Agent；Tier1/政府等强需求「数据不出客户环境」|
| **多租户** | Multi-tenancy | 租户间零数据串扰；支持按主机厂/项目隔离 |

#### 4.3.2 实体与流程术语

| 术语 | 英文 | 定义 |
|------|------|------|
| **数据源** | Data Source | 可接入的数据来源（OSS、Kafka、采集车、产线 PLC 等）|
| **接入任务** | Ingestion Task | 从某数据源拉取/接收数据的任务实例 |
| **数据资产** | Data Asset | 入湖后的逻辑数据单元（文件、片段、样本）|
| **元数据条目** | Metadata Entry | 描述数据资产的属性（模态、格式、场景、来源等）|
| **编排任务** | Orchestration Task | 调度至 K8s/GPU 的执行单元 |
| **标注任务** | Annotation Task | 针对一批数据资产的标注作业 |
| **标注结果** | Annotation Result | 单条数据资产的标注输出（框、掩码、标签等）|
| **仿真场景** | Simulation Scenario | 仿真环境配置（场景、参数、动作序列）|
| **行为会话** | Behavior Session | 智能体一次运行产生的多维数据关联集合；**来源**：车端（视频/IMU/轨迹/CAN）、产线（PLC/传感器/视频）、机器人（遥操作/仿真）|
| **发布任务** | Release Task | 一次 OTA 发布的任务实例 |
| **部署拓扑** | Deployment Topology | 部署形态（SaaS/私有化/边缘）；影响多租户与合规策略 |

#### 4.3.3 行业扩展术语（分行业用户故事）

| 术语 | 定义 | 关联用户故事 |
|------|------|--------------|
| **Matter** | 智能家居跨品牌设备互联协议 | 32 |
| **XIL（e.g. HiL）** | 硬件在环/策略在环验证；具身仿真 | 35、38 |
| **预测性维护** | 设备行为分析、故障预测；准确率 ≥ 80% | 41、45 |
| **政务云/信创** | 政府场景的数据底座适配 | 50 |

---

## 五、限界上下文详细建模

> 每个限界上下文展开：职责、聚合、领域事件、功能需求详表。**关联用户故事**来自第二章，用于需求溯源与验收标准对齐。

---

### 5.1 BC-ING 数据接入上下文

#### 5.1.1 职责与边界

- **职责**：多源数据统一接入；支持 OSS/S3/COS、Kafka、MQTT、RDS、API、PLC、Matter、MES；边缘 Agent 直传或经网关
- **上游**：外部数据源（采集车、量产车、仿真平台、产线、家居设备、Robotaxi 运营车）
- **下游**：BC-CAT（元数据注册）、BC-ORC（触发编排）
- **关联用户故事**：11、28、32、33、43、44、49（智驾、家居、工业、物联网）

#### 5.1.2 聚合与实体

| 聚合 | 聚合根 | 实体/值对象 | 说明 |
|------|--------|-------------|------|
| **数据源** | DataSource | ConnectorConfig（值对象）、ProtocolType（值对象）| 数据源配置；支持多协议 |
| **接入任务** | IngestionTask | TaskStatus、IngestionRule（值对象）| 单次接入任务；含状态、规则 |

#### 5.1.3 领域事件

| 事件 | 触发时机 |
|------|----------|
| **DataIngestionStarted** | 接入任务启动 |
| **DataIngestionCompleted** | 接入任务完成；下游可触发元数据注册、编排 |
| **DataIngestionFailed** | 接入失败；可触发告警、重试 |

#### 5.1.4 功能需求详表

| 需求 ID | 描述 | 子需求 | 验收标准（AC）| 优先级 |
|---------|------|--------|---------------|--------|
| **ING-01** | 对象存储接入 | ING-01.1 | 可对接 OSS、S3、COS 任意 1 家；支持列出、读取、元数据提取 | P0 |
| **ING-02** | 消息队列接入 | ING-02.1 | 可对接 Kafka、MQTT；支持订阅、消费、offset 管理 | P0 |
| **ING-03** | 数据库/API 接入 | ING-03.1 | 可对接 RDS 或 REST API；支持增量拉取 | P1 |
| **ING-04** | Connector 可扩展 | ING-04.1 | 新增协议可通过配置或插件完成 | P1 |
| **ING-05** | 边缘 Agent | ING-05.1 | 支持边缘直传与经网关双模式；压缩比 ≥ 50x；可配置过滤规则 | P1 |

---

### 5.2 BC-CAT 数据目录与元数据上下文

#### 5.2.1 职责与边界

- **职责**：统一元数据、Omni Catalog、多模态 schema、血缘追踪；**场景挖掘**（从数据中挖掘场景类型、长尾标签）；**场景包**（可复用场景配置）；支持政务云/信创适配
- **上游**：BC-ING（接入完成触发注册）
- **下游**：BC-ANN、BC-SIM、BC-BHV（检索、按场景/长尾筛选）
- **关联用户故事**：8、12、29、33、41、48、50（检索、场景挖掘、跨品牌目录、工业、平台商、政府）

#### 5.2.2 聚合与实体

| 聚合 | 聚合根 | 实体/值对象 | 说明 |
|------|--------|-------------|------|
| **数据资产** | DataAsset | AssetId、StoragePath、Modality（值对象）| 逻辑数据单元 |
| **元数据条目** | MetadataEntry | Schema、Lineage（值对象）| 资产属性与血缘 |

#### 5.2.3 领域事件

| 事件 | 触发时机 |
|------|----------|
| **MetadataRegistered** | 新数据资产注册完成 |
| **LineageUpdated** | 血缘关系更新（如标注产出）|

#### 5.2.4 功能需求详表

| 需求 ID | 描述 | 子需求 | 验收标准（AC）| 优先级 |
|---------|------|--------|---------------|--------|
| **CAT-01** | 多模态元数据模型 | CAT-01.1 | 支持文本、图像、视频、音频、3D/4D 至少 5 种模态 | P0 |
| **CAT-02** | 跨源数据目录 | CAT-02.1 | 支持至少 2 个数据源的统一目录视图 | P0 |
| **CAT-03** | 检索性能 | CAT-03.1 | 百万级元数据，条件检索 P95 延迟 < 500ms | P0 |
| **CAT-04** | 血缘与溯源 | CAT-04.1 | 支持采集→标注的 lineage 追踪 | P1 |
| **CAT-05** | 与分析/训练框架联动 | CAT-05.1 | 可通过 API 与至少 1 种框架交换元数据 | P1 |
| **CAT-06** | 场景挖掘 | CAT-06.1 | 从数据中挖掘场景类型、长尾标签；支持按场景/长尾筛选数据集；长尾样本检索；与 BC-ANN、BC-BHV 联动 | P0 |

---

### 5.3 BC-ORC 任务编排上下文

#### 5.3.1 职责与边界

- **职责**：任务调度、车云/家云/工业云数据流编排；**闭环效率与成本运营看板**（吞吐、周期、成本 ROI）；与 K8s、GPU、Kafka、OSS 集成
- **上游**：BC-ING（接入完成）、BC-CAT（元数据可用）
- **下游**：BC-ANN、BC-SIM、BC-OTA（触发任务）
- **关联用户故事**：4、5、13、28、32、41（车云编排、成本看板、Robotaxi 一体化、工业）

#### 5.3.2 聚合与实体

| 聚合 | 聚合根 | 实体/值对象 | 说明 |
|------|--------|-------------|------|
| **编排任务** | OrchestrationTask | TaskDependency、ResourceSpec（值对象）| 调度单元 |
| **数据流** | DataFlow | FlowRule、CompressionRule（值对象）| 车云编排规则 |

#### 5.3.3 领域事件

| 事件 | 触发时机 |
|------|----------|
| **OrchestrationTaskScheduled** | 任务已调度 |
| **OrchestrationTaskCompleted** | 任务完成 |
| **DataFlowTriggered** | 车云数据流触发（如按规则落盘后上传）|

#### 5.3.4 功能需求详表

| 需求 ID | 描述 | 子需求 | 验收标准（AC）| 优先级 |
|---------|------|--------|---------------|--------|
| **ORC-01** | K8s 集成 | ORC-01.1 | 支持任务调度至 K8s；可指定 CPU/内存/GPU | P0 |
| **ORC-02** | 批处理与流式 | ORC-02.1 | 支持批处理（定时/触发）与流式两种模式 | P0 |
| **ORC-03** | 任务依赖与重试 | ORC-03.1 | 支持 DAG 依赖；失败可配置重试与退避 | P0 |
| **ORC-04** | 车云编排 | ORC-04.1 | 支持按规则落盘、百倍级压缩；车端到桌面 < 10 分钟 | P0 |
| **ORC-05** | 调度吞吐 | ORC-05.1 | 单集群 ≥ 10,000 任务/天 | P1 |
| **ORC-06** | 闭环效率与成本运营看板 | ORC-06.1 | 展示闭环各环节（接入、编排、标注、仿真）吞吐、周期、成本；支持 ROI 分析；调用成本核算服务 | P1 |

---

### 5.4 BC-ANN 标注与质检上下文

#### 5.4.1 职责与边界

- **职责**：多模态标注（2D/3D/4D/BEV、动作序列、场景意图）；预标注+人工质检流水线；标注结果 API 导出；**开放 API 与场景包**（平台商集成）
- **上游**：BC-CAT（数据检索）、BC-ORC（任务调度）
- **下游**：BC-CAT（标注结果写入元数据）、训练平台
- **关联用户故事**：7、15～21、26、27、28a、30、31、36、45、47、48（智驾/Tier1/Robotaxi/具身/工业/平台商）

#### 5.4.2 聚合与实体

| 聚合 | 聚合根 | 实体/值对象 | 说明 |
|------|--------|-------------|------|
| **标注任务** | AnnotationTask | TaskScope、PreLabelConfig（值对象）| 标注作业 |
| **标注结果** | AnnotationResult | BoundingBox、Mask、Label（值对象）| 单条标注输出 |
| **质检单** | QCItem | QCLevel、PassThreshold（值对象）| 质检流水线项 |

#### 5.4.3 领域事件

| 事件 | 触发时机 |
|------|----------|
| **AnnotationTaskCreated** | 标注任务创建 |
| **PreLabelingCompleted** | 预标注完成 |
| **AnnotationApproved** | 标注通过质检 |
| **AnnotationRejected** | 标注被拒，需返工 |

#### 5.4.4 功能需求详表

| 需求 ID | 描述 | 子需求 | 验收标准（AC）| 优先级 |
|---------|------|--------|---------------|--------|
| **ANN-01** | 2D/3D 标注 | ANN-01.1 | 支持 2D 框、3D 框、多边形、分割掩码 | P0 |
| **ANN-02** | 4D/时序标注 | ANN-02.1 | 支持连续帧时序、BEV 联动（智驾）| P0 |
| **ANN-03** | 预标注编排 | ANN-03.1 | 可调用云 GPU 运行预标注；多模型串行/并行 | P0 |
| **ANN-04** | 自动化率与准确率 | ANN-04.1 | 预标注后自动化率 ≥ 60%、准确率 ≥ 99.9% | P0 |
| **ANN-05** | 质检流水线 | ANN-05.1 | 多级质检；可配置通过阈值 | P0 |
| **ANN-06** | 与训练平台对接 | ANN-06.1 | 标注结果可 API 导出至训练平台格式 | P1 |

---

### 5.5 BC-SIM 仿真与合成上下文

#### 5.5.1 职责与边界

- **职责**：驾驶仿真（OpenSCENARIO/OpenDRIVE）、具身仿真（MuJoCo/Isaac）、Real2Sim、动作合成、XIL 验证；单条 ≤ 0.05 元、日产能 ≥ 5,000 条
- **上游**：BC-CAT（场景配置）、BC-ORC（任务调度）
- **下游**：BC-ANN（仿真数据可标注）、BC-CAT（仿真数据注册）
- **关联用户故事**：19、20、34、35、37～39（智驾、具身）

#### 5.5.2 聚合与实体

| 聚合 | 聚合根 | 实体/值对象 | 说明 |
|------|--------|-------------|------|
| **仿真场景** | SimulationScenario | ScenarioParams、ActionSequence（值对象）| 仿真配置 |
| **仿真任务** | SimulationTask | OutputFormat、Cost（值对象）| 单次仿真作业 |

#### 5.5.3 领域事件

| 事件 | 触发时机 |
|------|----------|
| **SimulationTaskStarted** | 仿真任务启动 |
| **SimulationDataGenerated** | 仿真数据生成完成 |
| **SimulationTaskCompleted** | 仿真任务完成 |

#### 5.5.4 功能需求详表

| 需求 ID | 描述 | 子需求 | 验收标准（AC）| 优先级 |
|---------|------|--------|---------------|--------|
| **SIM-01** | 驾驶仿真 | SIM-01.1 | 支持 OpenSCENARIO/OpenDRIVE；可生成极端场景 | P1 |
| **SIM-02** | 具身仿真 | SIM-02.1 | 支持 MuJoCo/Isaac 或兼容；可生成动作轨迹、XIL 验证 | P1 |
| **SIM-03** | Real2Sim | SIM-03.1 | 支持真实场景重建仿真或场景导入接口 | P1 |
| **SIM-04** | 与标注/训练闭环 | SIM-04.1 | 仿真数据可进入标注流水线、标注后导入训练 | P1 |
| **SIM-05** | 成本效益 | SIM-05.1 | 具身仿真单条 ≤ 0.05 元；日产能 ≥ 5,000 条/集群 | P1 |

---

### 5.6 BC-BHV 行为分析与回灌决策上下文

#### 5.6.1 职责与边界

- **职责**：**车端/产线/机器人**多维时间轴对齐；根因定位（感知/决策/控制/设备故障）；问题样本挖掘与回灌决策；支持视频、IMU、轨迹、PLC/传感器、执行器、感知/决策叠加
- **上游**：BC-CAT（行为会话数据检索）
- **下游**：BC-ANN（问题样本导出至标注）、BC-ORC（触发回灌采集）
- **关联用户故事**：6、8～10、37、45、46（智驾行为回放、工业故障追溯、具身 sim-to-real）

#### 5.6.2 聚合与实体

| 聚合 | 聚合根 | 实体/值对象 | 说明 |
|------|--------|-------------|------|
| **行为会话** | BehaviorSession | SessionId、TimeRange、DataSourceRefs（值对象）| 一次运行的多维数据关联 |
| **问题样本** | ProblemSample | ProblemType、RootCauseSegment（值对象）| 需回灌的样本 |

#### 5.6.3 领域事件

| 事件 | 触发时机 |
|------|----------|
| **ProblemSampleIdentified** | 问题样本被识别 |
| **RootCauseLocated** | 根因定位完成（感知/决策/控制）|
| **FeedbackDecisionMade** | 回灌决策生成（驱动下一轮采集）|

#### 5.6.4 功能需求详表

| 需求 ID | 描述 | 子需求 | 验收标准（AC）| 优先级 |
|---------|------|--------|---------------|--------|
| **BHV-01** | 多源时间轴对齐 | BHV-01.1 | 视频、IMU、轨迹、CAN/模块信号、感知、决策可统一时间轴呈现；**工业场景**支持 PLC/传感器/执行器信号（用户故事 46）| P1 |
| **BHV-02** | 多视图联动 | BHV-02.1 | 拖拽时间轴；多路视频、轨迹、波形联动刷新 | P1 |
| **BHV-03** | 感知/决策叠加 | BHV-03.1 | 检测框、分割、BEV、规划路径可与原始视频/点云叠加 | P1 |
| **BHV-04** | 问题样本导出 | BHV-04.1 | 支持按问题类型筛选；可导出至标注或回灌流程 | P1 |

---

### 5.7 BC-OTA OTA 与模型部署上下文

#### 5.7.1 职责与边界

- **职责**：SOTA/FOTA/DOTA、灰度与回滚；与训练平台对接触发 OTA；支持车端、机器人、产线设备
- **上游**：训练平台（模型就绪）、BC-ORC（任务触发）
- **下游**：车端/机器人/产线设备（模型/固件落地）；闭环完成
- **关联用户故事**：21、22、40（智驾、具身）

#### 5.7.2 聚合与实体

| 聚合 | 聚合根 | 实体/值对象 | 说明 |
|------|--------|-------------|------|
| **发布任务** | ReleaseTask | TargetDevices、GrayPolicy（值对象）| 单次 OTA 发布 |
| **部署批次** | DeploymentBatch | BatchId、Status、RollbackRef | 灰度批次 |

#### 5.7.3 领域事件

| 事件 | 触发时机 |
|------|----------|
| **ReleaseTaskCreated** | 发布任务创建 |
| **DeploymentBatchCompleted** | 某批次部署完成 |
| **RollbackTriggered** | 回滚触发 |
| **OTAClosedLoopCompleted** | OTA 闭环完成（模型已推送到设备）|

#### 5.7.4 功能需求详表

| 需求 ID | 描述 | 子需求 | 验收标准（AC）| 优先级 |
|---------|------|--------|---------------|--------|
| **OTA-01** | SOTA/FOTA/DOTA | OTA-01.1 | 支持至少 1 种 OTA 类型 | P1 |
| **OTA-02** | 与训练平台对接 | OTA-02.1 | 模型训练完成可触发 OTA；支持版本管理 | P1 |
| **OTA-03** | 灰度与回滚 | OTA-03.1 | 支持分批次推送；可回滚至上一版本 | P1 |
| **OTA-04** | 与设备对接 | OTA-04.1 | 可通过标准协议与车端/机器人/产线通信下发 | P1 |

---

### 5.8 BC-GOV 合规与治理上下文

#### 5.8.1 职责与边界

- **职责**：脱敏、审计、数据分级分类；**多租户隔离**（租户间零串扰）；**私有化部署**（数据不出客户环境）；出境备案；政务云/信创适配
- **上游**：全链路（操作触发审计）
- **下游**：合规报表、出境备案
- **关联用户故事**：23、24、26、27a、31、42、50、51（法务、Tier1、家居、工业、政府）

#### 5.8.2 聚合与实体

| 聚合 | 聚合根 | 实体/值对象 | 说明 |
|------|--------|-------------|------|
| **审计记录** | AuditRecord | Operation、Actor、Timestamp（值对象）| 操作审计 |
| **数据分级** | DataClassification | SensitivityLevel、BusinessCategory（值对象）| 分级标签 |
| **部署拓扑** | DeploymentTopology | TopologyType（SaaS/私有化/边缘）、TenantId（值对象）| 部署形态；支撑多租户与私有化（用户故事 27a）|

#### 5.8.3 领域事件

| 事件 | 触发时机 |
|------|----------|
| **AuditRecordCreated** | 关键操作发生（接入、导出、删除、权限变更）|
| **DataClassified** | 数据被打分级标签 |
| **DeploymentTopologyConfigured** | 部署形态变更（SaaS/私有化/边缘）；多租户配置更新 |

#### 5.8.4 功能需求详表

| 需求 ID | 描述 | 子需求 | 验收标准（AC）| 优先级 |
|---------|------|--------|---------------|--------|
| **GOV-01** | 脱敏 | GOV-01.1 | 支持至少 2 种脱敏方式（泛化、加密、差分隐私等）；**可测场景**：对手机号、身份证等字段可配置脱敏规则，验证输出符合脱敏后格式 | P0 |
| **GOV-02** | 审计日志 | GOV-02.1 | 关键操作全量记录；可检索、可导出 | P0 |
| **GOV-03** | 多租户隔离 | GOV-03.1 | 租户间零数据串扰（渗透测试验证）；支持私有化部署（数据不出客户环境）| P0 |
| **GOV-04** | 数据分级分类 | GOV-04.1 | 支持打标签；可按标签做访问控制 | P1 |
| **GOV-05** | 出境备案 | GOV-05.1 | 支持导出数据出境清单格式 | P1 |
| **GOV-06** | 部署形态 | GOV-06.1 | 支持 SaaS、私有化、边缘 Agent；政务云/信创适配（用户故事 50）| P1 |

---

## 六、战术设计

### 6.1 聚合与聚合根汇总

| 上下文 | 聚合根 | 不变性（Invariant）| 职责 |
|--------|--------|-------------------|------|
| BC-ING | DataSource、IngestionTask | 接入任务状态机合法转移 | 多源接入 |
| BC-CAT | DataAsset、MetadataEntry | 元数据与存储路径一致 | 目录与血缘 |
| BC-ORC | OrchestrationTask、DataFlow | 任务依赖无环；资源不超限 | 调度与编排 |
| BC-ANN | AnnotationTask、AnnotationResult、QCItem | 标注结果与任务范围一致；质检通过才可导出 | 标注与质检 |
| BC-SIM | SimulationScenario、SimulationTask | 仿真产出与场景配置一致 | 合成数据 |
| BC-BHV | BehaviorSession、ProblemSample | 问题样本可追溯至行为会话 | 根因与回灌 |
| BC-OTA | ReleaseTask、DeploymentBatch | 部署批次与发布任务一致；回滚可追溯 | OTA 发布 |
| BC-GOV | AuditRecord、DataClassification、DeploymentTopology | 审计不可篡改；部署拓扑与租户一致 | 合规治理 |

### 6.2 实体与值对象（选列）

| 类型 | 名称 | 所在聚合 | 说明 |
|------|------|----------|------|
| 值对象 | Modality | MetadataEntry | 文本/图像/视频/音频/3D/4D |
| 值对象 | BoundingBox | AnnotationResult | 2D/3D 框坐标 |
| 值对象 | TimeRange | BehaviorSession | 时间范围 |
| 值对象 | GrayPolicy | ReleaseTask | 灰度策略（分批比例、间隔）|
| 值对象 | TopologyType | DeploymentTopology | SaaS/私有化/边缘 |
| 值对象 | BehaviorSource | BehaviorSession | 车端/产线/机器人；决定数据模态组合 |
| 实体 | QCItem | 质检聚合 | 有唯一 ID；状态可变 |

### 6.3 领域服务（跨聚合）

| 领域服务 | 职责 | 涉及上下文 | 关联用户故事 |
|----------|------|------------|--------------|
| **回灌决策服务** | 根据问题样本生成下一轮采集策略 | BC-BHV、BC-ORC | 10 |
| **标注质量评估服务** | 计算自动化率、准确率、一致性 | BC-ANN、BC-CAT | 15、26 |
| **成本核算服务** | 核算接入、存储、标注、仿真各环节成本；支撑闭环效率与成本运营看板 | BC-ING、BC-CAT、BC-ANN、BC-SIM、BC-ORC | 5 |
| **场景挖掘服务** | 从数据中挖掘场景类型、长尾标签；支撑按场景筛选 | BC-CAT | 8、28a |

---

## 七、事件风暴

> 基于 Event Storming 工作坊产出的命令、事件、策略、参与者、外部系统。

### 7.1 命令（Command）

| 命令 | 发起者 | 目标上下文 | 说明 |
|------|--------|------------|------|
| **StartIngestion** | 数据工程师、工业数据工程师 | BC-ING | 启动接入任务 |
| **CreateAnnotationTask** | 标注项目经理 | BC-ANN | 创建标注任务 |
| **RunPreLabeling** | 系统/用户 | BC-ANN | 执行预标注 |
| **ApproveAnnotation** | 质检员 | BC-ANN | 通过质检 |
| **StartSimulation** | 算法工程师、仿真工程师 | BC-SIM | 启动仿真任务 |
| **IdentifyProblemSample** | 算法工程师、产线/设备工程师 | BC-BHV | 标记问题样本（智驾/工业）|
| **CreateReleaseTask** | 智驾负责人、具身算法负责人 | BC-OTA | 创建 OTA 发布任务 |
| **TriggerRollback** | 运维/OTA 工程师 | BC-OTA | 触发回滚 |
| **RequestCostDashboard** | 数据平台负责人 | BC-ORC、BC-GOV | 请求闭环效率与成本运营看板（用户故事 5）|
| **RequestSceneMining** | 算法工程师 | BC-CAT | 按场景/长尾筛选数据集（用户故事 8）|

### 7.2 领域事件流（核心业务流程）

```
[StartIngestion] → DataIngestionStarted
                → DataIngestionCompleted → [MetadataRegistered]
                                         → [OrchestrationTaskScheduled]
[CreateAnnotationTask] → AnnotationTaskCreated
[RunPreLabeling] → PreLabelingCompleted
[ApproveAnnotation] → AnnotationApproved → [MetadataUpdated]
[IdentifyProblemSample] → ProblemSampleIdentified → RootCauseLocated
                                          → FeedbackDecisionMade → [触发回灌]
[CreateReleaseTask] → ReleaseTaskCreated → DeploymentBatchCompleted
                → OTAClosedLoopCompleted
```

### 7.3 策略（Policy，领域事件触发的自动化）

| 策略 | 触发事件 | 动作 |
|------|----------|------|
| **接入完成后注册元数据** | DataIngestionCompleted | 调用 BC-CAT 注册 MetadataEntry |
| **接入完成后调度编排** | DataIngestionCompleted | 根据规则触发 BC-ORC 编排任务 |
| **标注通过后更新血缘** | AnnotationApproved | 更新 BC-CAT 中 Lineage |
| **问题样本驱动回灌** | FeedbackDecisionMade | 触发 BC-ORC 编排下一轮采集 |

### 7.4 参与者（Actor）

| 角色 | 主要命令 | 涉及上下文 | 来源（第一章）|
|------|----------|------------|---------------|
| 数据工程师 | StartIngestion | BC-ING、BC-CAT、BC-ORC | OEM、家居、工业 |
| 工业数据工程师 | StartIngestion | BC-ING | 智能工厂 |
| 标注项目经理 | CreateAnnotationTask、RunPreLabeling | BC-ANN | OEM、Tier1 |
| 质检员 | ApproveAnnotation、RejectAnnotation | BC-ANN | OEM |
| 算法工程师 | StartSimulation、IdentifyProblemSample、RequestSceneMining | BC-SIM、BC-BHV、BC-CAT | OEM、Tier1、Robotaxi、具身、工业 |
| 仿真工程师 | StartSimulation | BC-SIM | OEM、具身 |
| 产线/设备工程师 | IdentifyProblemSample | BC-BHV | 智能工厂 |
| 智驾/OTA 负责人 | CreateReleaseTask、TriggerRollback | BC-OTA | OEM、具身 |
| 数据平台负责人 | RequestCostDashboard | BC-ORC、BC-GOV | OEM |
| 合规员/法务 | 查看审计、导出清单 | BC-GOV | OEM、政府 |

### 7.5 外部系统（External System）

| 外部系统 | 与上下文的集成方式 | 关联用户故事 |
|----------|---------------------|--------------|
| 客户 OSS/S3/COS | BC-ING Connector 拉取 | 4、11 |
| 客户 Kafka | BC-ING 订阅 | 11 |
| Matter/家居设备 | BC-ING 接入 | 32 |
| PLC/MES/传感器（工业）| BC-ING 或 BC-ORC 对接 | 41、43 |
| 客户 K8s | BC-ORC 调度任务 | 4 |
| 训练平台（MLOps）| BC-ANN 导出标注；BC-OTA 接收模型触发 | 14、22 |
| 车端/机器人/产线设备 | BC-OTA 推送 | 21、40 |
| MES/ERP（工业）| BC-ING 或 BC-CAT 对接 | 41 |
| 政务云/信创 | BC-GOV 适配 | 50 |

---

## 八、上下文映射

> 限界上下文之间的协作关系（基于 DDD 上下文映射模式）。

```
                    ┌─────────────────────────────────────────────────────────────────────────┐
                    │                        上下文映射（Context Map）                           │
                    └─────────────────────────────────────────────────────────────────────────┘

   ┌─────────┐       ┌─────────┐       ┌─────────┐       ┌─────────┐
   │ BC-ING  │──C──→ │ BC-CAT  │←──C───│ BC-ORC  │       │ BC-ANN  │
   │ 数据接入 │       │ 元数据   │       │ 编排    │──C──→ │ 标注    │
   └─────────┘       └─────────┘       └────┬────┘       └────┬────┘
        │                   │                │                 │
        │  OHS/REST         │  OHS/REST      │  OHS/REST      │  OHS/REST
        ▼                   ▼                ▼                 ▼
   ┌─────────┐       ┌─────────┐       ┌─────────┐       ┌─────────┐
   │ BC-SIM  │←──C── │ BC-BHV  │       │ BC-OTA  │       │ BC-GOV  │
   │ 仿真    │       │ 行为分析 │       │ OTA部署  │       │ 合规    │
   └─────────┘       └─────────┘       └─────────┘       └─────────┘

图例：──C──→  Customer（上游为客户，下游为供应商）；OHS = Open Host Service（开放主机服务）
```

| 上游 | 下游 | 关系模式 | 集成方式 |
|------|------|----------|----------|
| BC-ING | BC-CAT | C（客户-供应商）| DataIngestionCompleted 事件 → 注册元数据 |
| BC-ING | BC-ORC | C | 接入完成触发编排 |
| BC-ORC | BC-ANN | C | 调度标注任务 |
| BC-ORC | BC-SIM | C | 调度仿真任务 |
| BC-ANN | BC-CAT | C | 标注通过更新血缘 |
| BC-BHV | BC-ANN | C | 问题样本导出至标注 |
| BC-BHV | BC-ORC | C | 回灌决策触发编排 |
| BC-SIM | BC-CAT | C | 仿真数据注册 |
| BC-OTA | 车端/设备 | C | 标准协议推送 |
| 全链路 | BC-GOV | C | 操作触发审计 |

---

## 九、用户与干系人

> **与第一章对齐**：本节提炼各用户角色的核心诉求与 BC 映射，详细角色列表见 [1.2 用户角色总览](#12-用户角色总览按行业--组织--层级)。

### 9.1 用户角色与核心诉求

| 用户角色 | 典型代表 | 核心诉求 | 主要涉及上下文 | 关联用户故事（选列）|
|----------|----------|----------|----------------|---------------------|
| **OEM/车企智驾负责人** | 智驾负责人、数据平台负责人 | 端到端闭环、合规、成本优化、车云编排、OTA 闭环 | BC-全、BC-ORC、BC-OTA、BC-GOV | 1、3、4、5 |
| **Tier1 算法/CTO** | 算法负责人、CTO、标注项目经理 | 标注质量 99.9%+、多主机厂隔离、私有化部署 | BC-ANN、BC-GOV | 25、26、27、27a |
| **Robotaxi 智驾/数据** | 智驾负责人、算法工程师 | 运营+采集一体化、4D 标注、场景挖掘 | BC-ING、BC-ORC、BC-ANN、BC-CAT | 28、28a |
| **智能家居产品/AI 负责人** | 产品经理、AI 负责人 | 隐私、跨品牌接入、Matter、场景意图 | BC-ING、BC-ANN、BC-GOV | 29、30、31、32、33 |
| **人形机器人算法/仿真负责人** | 算法、仿真负责人 | 仿真数据、动作标注、Real2Sim、OTA | BC-SIM、BC-ANN、BC-OTA | 34、35、38、40 |
| **工业/物联网数字化负责人** | 数字化负责人、IT、产线工程师 | 边缘部署、MES 集成、预测性维护、故障追溯 | BC-ING、BC-ORC、BC-BHV | 41、42、43、45、46 |
| **政府/平台商** | 智慧城市负责人、平台产品负责人 | 政务云/信创、数据底座、开放 API 与场景包 | BC-CAT、BC-GOV、BC-ANN | 47、48、50 |

### 9.2 干系人关注点

| 干系人 | 关注点 | 对应上下文 |
|--------|--------|------------|
| 销售/商务 | PoC、预算周期、触达策略 | 全链路 |
| 法务/合规 | 《个保法》《数安法》、出境备案 | BC-GOV |
| 研发 | 上下文边界、领域事件契约 | 各 BC |

---

## 十、非功能需求

### 10.1 性能与效率

| 需求 ID | 非功能需求 | 量化指标 | 涉及上下文 |
|---------|------------|----------|------------|
| NF-01 | 元数据检索延迟 | 百万级 < 500ms P95 | BC-CAT |
| NF-02 | 任务调度吞吐 | ≥ 10,000 任务/天 | BC-ORC |
| NF-03 | 车端压缩比 | ≥50x（目标百倍级；智协慧同标杆）| BC-ING、BC-ORC |
| NF-04 | 端到端到桌延迟 | 车云 < 10 分钟 | BC-ORC |
| NF-05 | 预标注效率 | 单帧较人工降 50%+ | BC-ANN |
| NF-06 | 具身仿真产能 | 单条 ≤ 0.05 元；≥ 5,000 条/集群/天 | BC-SIM |

### 10.2 安全与合规

| 需求 ID | 非功能需求 | 说明 | 涉及上下文 |
|---------|------------|------|------------|
| NF-07 | 身份认证 | OAuth2/OIDC/SSO | 全链路 |
| NF-08 | 权限控制 | RBAC | 全链路 |
| NF-09 | 多租户隔离 | 零串扰 | BC-GOV |
| NF-10 | 审计 | 100% 覆盖，全量留存 | BC-GOV |
| NF-11 | 数据出境 | 本地化、脱敏、备案 | BC-GOV |

### 10.3 集成与可扩展性

| 需求 ID | 非功能需求 | 说明 |
|---------|------------|------|
| NF-12 | 云存储对接 | ≥ 3 家（OSS/S3/COS）|
| NF-13 | 协议支持 | ≥ 6 种 |
| NF-14 | 多模态 | ≥ 5 种 |
| NF-15 | 部署形态 | SaaS、私有化、边缘 Agent |

---

## 十一、需求追溯矩阵

### 11.1 痛点→限界上下文→产品框架

| 痛点（01 调研 6.1）| 限界上下文 | 产品框架能力/模块 |
|-------------------|------------|-------------------|
| 数据孤岛 | BC-ING、BC-CAT | 多源接入、元数据管理 |
| 云资源利用效率 | BC-ORC | 任务调度、车云编排 |
| 质量与合规 | BC-ANN、BC-GOV | 多模态标注、合规与治理 |
| 长尾/稀缺场景 | BC-SIM、BC-CAT | 仿真、海量分析 |
| 实时性 | BC-ING（边缘 Agent）| 边缘 Agent |
| 智能体行为调试 | BC-BHV | 高效数据可视化工具链 |
| OTA 闭环断裂 | BC-OTA | OTA/模型部署模块 |

### 11.2 上下文需求 ID 汇总

| 上下文 | 需求 ID 范围 | 优先级 | 建议 Phase |
|--------|--------------|--------|------------|
| BC-ING | ING-01～ING-05 | P0 为主 | Phase 1 |
| BC-CAT | CAT-01～CAT-06 | P0 为主 | Phase 1 |
| BC-ORC | ORC-01～ORC-06 | P0（ORC-06 为 P1）| Phase 1-2 |
| BC-ANN | ANN-01～ANN-06 | P0 | Phase 1-2 |
| BC-GOV | GOV-01～GOV-06 | P0（GOV-06 为 P1）| Phase 1 |
| BC-SIM | SIM-01～SIM-05 | P1 | Phase 2-3 |
| BC-BHV | BHV-01～BHV-04 | P1 | Phase 2-3 |
| BC-OTA | OTA-01～OTA-04 | P1 | Phase 2-3 |

### 11.3 分行业差异化（上下文内扩展）

> 在各限界上下文基础上，按行业增加扩展需求与验收标准。

#### 11.3.1 智驾（P0）

| 扩展 ID | 上下文 | 描述 | 验收标准（AC）| 数据来源 |
|---------|--------|------|---------------|----------|
| **FD-AD.1** | BC-ING | 车端高密度信号采集 | 单车 26,000+ 信号；支持 CAN、以太网 | 01 调研 4.1 |
| **FD-AD.2** | BC-ORC | 百倍级压缩与按规则落盘 | 压缩比 ≥ 50x（目标百倍）；支持接管/事故/特定场景触发落盘 | 01 调研 6.1.3 |
| **FD-AD.3** | BC-ANN | 4D/BEV/激光分割标注 | 连续帧、BEV 视图、点云分割；与预标注联动 | 01 调研 4.1 |
| **FD-AD.4** | BC-SIM | 驾驶仿真与极端场景 | OpenSCENARIO/OpenDRIVE；可生成/修改极端场景 | 01 调研 4.1 |
| **FD-AD.5** | BC-ORC、BC-ANN | 成本优化目标 | **验收门槛**：传输/存储降 ≥ 70%；预标注自动化率 ≥ 70%。**行业标杆**：智协慧同总成本-85%[10] | 01 调研 6.1.3 |

#### 11.3.2 工业（P0）

| 扩展 ID | 上下文 | 描述 | 验收标准（AC）| 数据来源 |
|---------|--------|------|---------------|----------|
| **FD-IN.1** | BC-ING | 产线/设备数据接入 | PLC、MES、传感器、摄像头 ≥ 3 类 | 01 调研 6.1.2 |
| **FD-IN.2** | BC-CAT/BC-ING | 与 MES/ERP 集成 | API 或连接器；主数据同步 | 01 调研 4.5 |
| **FD-IN.3** | BC-BHV | 预测性维护 | 设备行为分析、故障预测；准确率 ≥ 80% | 01 调研 4.4 |
| **FD-IN.4** | BC-ING | 边缘网关部署 | 工业网关、5G 专网；单工厂设备 ≥ 500 | 01 调研 6.1.6 |

#### 11.3.3 智能家居（P1）

**覆盖说明**（D4）：家居为 P1 探索行业，当前 5 条用户故事满足 Phase 2-3 需求；若后续拓展主动智能、跨品牌数据融合等，可补充：跨品牌数据融合、隐私沙箱、主动智能策略迭代等用户故事。

| 扩展 ID | 上下文 | 描述 | 验收标准（AC）| 数据来源 |
|---------|--------|------|---------------|----------|
| **FD-HA.1** | BC-ING | Matter 协议兼容 | Matter 或兼容协议设备接入 | 01 调研 4.2 |
| **FD-HA.2** | BC-ING、BC-CAT | 跨品牌数据汇聚 | 多品牌 APP/云端统一目录 | 01 调研 6.1.2 |
| **FD-HA.3** | BC-ANN | 场景意图解析 | 场景标注、用户意图标签；与主动智能联动 | 01 调研 4.2 |

#### 11.3.4 具身智能（P1）

| 扩展 ID | 上下文 | 描述 | 验收标准（AC）| 数据来源 |
|---------|--------|------|---------------|----------|
| **FD-EM.1** | BC-SIM | 物理仿真与动作合成 | MuJoCo/Isaac 或兼容；动作轨迹、XIL 验证 | 01 调研 4.3.1 |
| **FD-EM.2** | BC-SIM | Real2Sim 与 sim-to-real | 真实场景重建；仿真+真实混合配比训练 | 01 调研 4.3.1 |
| **FD-EM.3** | BC-ANN | 动作序列与多模态标注 | 关节角度、轨迹、力控；与仿真闭环 | 01 调研 4.3 |
| **FD-EM.4** | BC-SIM | 仿真成本与产能 | 单条 ≤ 0.05 元；≥ 5,000 条/集群/天 | 01 调研 4.3.1 |

#### 11.3.5 物联网（P1）

| 扩展 ID | 上下文 | 描述 | 验收标准（AC）| 数据来源 |
|---------|--------|------|---------------|----------|
| **FD-IoT.1** | BC-ING | 边缘实时处理 | 边缘延迟 < 100ms P95；本地过滤与聚合 | 01 调研 6.1.6 |
| **FD-IoT.2** | BC-ORC | 带宽与延迟优化 | 带宽节省 ≥ 50%；延迟降幅 ≥ 50% | 01 调研 4.4 |

---


## 附录 A：领域事件清单（完整）

| 事件 | 上下文 | 触发命令/操作 |
|------|--------|---------------|
| DataIngestionStarted | BC-ING | StartIngestion |
| DataIngestionCompleted | BC-ING | 接入任务完成 |
| DataIngestionFailed | BC-ING | 接入失败 |
| MetadataRegistered | BC-CAT | 接收 DataIngestionCompleted |
| LineageUpdated | BC-CAT | AnnotationApproved 等 |
| OrchestrationTaskScheduled | BC-ORC | 任务调度 |
| OrchestrationTaskCompleted | BC-ORC | 任务完成 |
| DataFlowTriggered | BC-ORC | 车云规则触发 |
| AnnotationTaskCreated | BC-ANN | CreateAnnotationTask |
| PreLabelingCompleted | BC-ANN | RunPreLabeling |
| AnnotationApproved | BC-ANN | ApproveAnnotation |
| AnnotationRejected | BC-ANN | RejectAnnotation |
| SimulationTaskStarted | BC-SIM | StartSimulation |
| SimulationDataGenerated | BC-SIM | 仿真产出 |
| SimulationTaskCompleted | BC-SIM | 仿真完成 |
| ProblemSampleIdentified | BC-BHV | IdentifyProblemSample |
| RootCauseLocated | BC-BHV | 根因分析完成 |
| FeedbackDecisionMade | BC-BHV | 回灌决策生成 |
| ReleaseTaskCreated | BC-OTA | CreateReleaseTask |
| DeploymentBatchCompleted | BC-OTA | 批次部署完成 |
| RollbackTriggered | BC-OTA | TriggerRollback |
| OTAClosedLoopCompleted | BC-OTA | 闭环完成 |
| AuditRecordCreated | BC-GOV | 关键操作 |
| DataClassified | BC-GOV | 打标签 |
| DeploymentTopologyConfigured | BC-GOV | 部署形态/多租户配置变更 |

---

## 附录 B：与产品框架的对应关系

| 产品框架章节（03 文档）| 本 DDD 来源 |
|------------------------|-------------|
| 公共基础能力 1.1 | BC-ING、BC-CAT、BC-ORC、BC-GOV 等上下文的聚合与领域服务 |
| 产品模块 1.2 | 限界上下文 + 分行业扩展（FD-AD、FD-IN 等）|
| 能力量化目标 2.2 | 各 BC 功能需求详表的 AC；非功能需求 NF-01～NF-06 |
| 行业优先级 5.1 | 11.3 分行业差异化 |
| 用例驱动 | 7.2 领域事件流、7.1 命令与 7.4 参与者 |

**需求变更流程**（E2）：建立可操作 Checklist——① 领域模型/聚合/事件变更 → ② 更新对应 BC 详表（第五章）→ ③ 同步 [03.产品框架](03.产品框架.md) 1.4 追溯表 → ④ 通知产品/架构评审 → ⑤ 更新 11.2 需求 ID 汇总。变更需经产品经理签字确认。

---

## 附录 C：典型用例详表（DDD 视角）

> 将业务流程映射到限界上下文、命令、领域事件，便于研发实现与测试用例设计。

| 用例 ID | 用例名称 | 参与者 | 涉及上下文 | 主流程（命令→事件）| 后置条件 | 验收要点 |
|---------|----------|--------|------------|---------------------|----------|----------|
| **UC-01** | 多源数据统一接入 | 数据工程师 | BC-ING、BC-CAT | StartIngestion → DataIngestionCompleted → MetadataRegistered | 元数据可检索；血缘可追溯 | ING-01～04、CAT-01～03 |
| **UC-02** | 车云数据分钟级到桌面 | 智驾数据平台负责人 | BC-ING、BC-ORC、BC-CAT | 车端落盘 → DataFlowTriggered → MetadataRegistered | 车端到桌面 < 10 分钟 | ORC-04、FD-AD.2 |
| **UC-03** | 预标注+人工质检流水线 | 标注项目经理 | BC-ANN、BC-ORC、BC-CAT | CreateAnnotationTask → RunPreLabeling → PreLabelingCompleted → ApproveAnnotation → AnnotationApproved | 自动化率 ≥ 60%；准确率 ≥ 99.9% | ANN-01～05 |
| **UC-04** | 问题样本根因定位与回灌 | 算法工程师 | BC-BHV、BC-CAT、BC-ANN、BC-ORC | IdentifyProblemSample → RootCauseLocated → FeedbackDecisionMade → 触发编排 | 可定位感知/决策/控制；可驱动回灌 | BHV-01～04 |
| **UC-05** | 模型 OTA 闭环 | 智驾负责人 | BC-OTA、训练平台、车端 | CreateReleaseTask → DeploymentBatchCompleted → OTAClosedLoopCompleted | 模型/固件推送到车端 | OTA-01～04 |
| **UC-06** | 仿真数据生成与标注 | 具身算法负责人 | BC-SIM、BC-ANN、BC-CAT | StartSimulation → SimulationDataGenerated → 注册至 CAT → 进入 ANN | 单条 ≤ 0.05 元；可进入训练 | SIM-01～05、FD-EM |

### 用例 UC-03 详细流程（示例）

```
参与者：标注项目经理、质检员
前置条件：数据已入湖（BC-CAT）；预标注模型已配置

步骤     | 角色           | 命令/操作              | 上下文 | 产生事件
---------|----------------|------------------------|--------|------------------
1        | 标注项目经理   | CreateAnnotationTask   | BC-ANN | AnnotationTaskCreated
2        | 系统           | RunPreLabeling         | BC-ANN | PreLabelingCompleted
3        | 质检员         | 抽检/复检              | BC-ANN | —
4a       | 质检员         | ApproveAnnotation      | BC-ANN | AnnotationApproved
4b       | 质检员         | RejectAnnotation       | BC-ANN | AnnotationRejected（返工）
5        | 系统           | 接收 AnnotationApproved| BC-CAT | LineageUpdated
6        | 标注项目经理   | 导出至训练平台         | BC-ANN | （通过 API）

后置条件：标注结果可检索；血缘已更新；可导出训练格式
```

---

## 附录 D：子需求完整分解（按上下文）

> 5.1～5.8 节已列出各上下文功能需求，此处对部分高优先级需求做更细分解，供研发排期。

### BC-ING 子需求分解

| 父需求 | 子需求 ID | 描述 | 验收标准（AC）|
|--------|-----------|------|---------------|
| ING-01 | ING-01.1 | OSS 接入 | 支持列出 bucket、对象；读取、元数据提取 |
| ING-01 | ING-01.2 | S3 接入 | 同上；兼容 S3 协议 |
| ING-01 | ING-01.3 | COS 接入 | 同上；腾讯云 COS |
| ING-02 | ING-02.1 | Kafka 消费 | 订阅 topic；消费、commit offset；支持消费者组 |
| ING-02 | ING-02.2 | MQTT 订阅 | 支持 QoS 0/1；主题过滤 |
| ING-05 | ING-05.1 | 边缘直传 | Agent 部署车端/网关；直连 OSS/Kafka |
| ING-05 | ING-05.2 | 经网关汇聚 | 多边缘节点经网关汇聚后上传 |
| ING-05 | ING-05.3 | 压缩与过滤 | 压缩比 ≥ 50x；可配置过滤规则（如按 CAN 信号）|

### BC-ANN 子需求分解

| 父需求 | 子需求 ID | 描述 | 验收标准（AC）|
|--------|-----------|------|---------------|
| ANN-01 | ANN-01.1 | 2D 框 | 支持矩形框、旋转框 |
| ANN-01 | ANN-01.2 | 3D 框 | 支持 3D 包围框、姿态 |
| ANN-01 | ANN-01.3 | 分割掩码 | 支持多边形、像素级掩码 |
| ANN-03 | ANN-03.1 | 单模型预标注 | 调用单一预标注模型 |
| ANN-03 | ANN-03.2 | 多模型编排 | 串行（如检测→分割）或并行 |
| ANN-03 | ANN-03.3 | GPU 资源申请 | 可指定 GPU 型号、数量；与 K8s 集成 |
| ANN-05 | ANN-05.1 | 初检 | 首次标注后自动进入初检队列 |
| ANN-05 | ANN-05.2 | 复检 | 初检不通过进入复检 |
| ANN-05 | ANN-05.3 | 抽检 | 按比例抽检；可配置阈值 |

### BC-ORC 子需求分解

| 父需求 | 子需求 ID | 描述 | 验收标准（AC）|
|--------|-----------|------|---------------|
| ORC-04 | ORC-04.1 | 按规则落盘 | 支持触发条件配置（接管、事故、特定路口等）|
| ORC-04 | ORC-04.2 | 百倍压缩 | 车端压缩比 ≥ 50x（目标百倍）|
| ORC-04 | ORC-04.3 | 分钟级到桌面 | 从车端触发到工程师可检索 < 10 分钟 |
| ORC-04 | ORC-04.4 | 车云协议 | 支持车端与云端的标准通信协议 |
